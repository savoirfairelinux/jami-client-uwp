<!-- **********************************************************************
* Copyright (C) 2016 by Savoir-faire Linux                                *
* Author: Jäger Nicolas<nicolas.jager@savoirfairelinux.com>               *
* Author: Traczyk Andreas<andreas.traczyk@savoirfairelinux.com>           *
*                                                                         *
* This program is free software; you can redistribute it and/or modify    *
* it under the terms of the GNU General Public License as published by    *
* the Free Software Foundation; either version 3 of the License, or       *
* (at your option) any later version.                                     *
*                                                                         *
* This program is distributed in the hope that it will be useful,         *
* but WITHOUT ANY WARRANTY; without even the implied warranty of          *
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *
* GNU General Public License for more details.                            *
*                                                                         *
* You should have received a copy of the GNU General Public License       *
* along with this program.  If not, see <http://www.gnu.org/licenses/> .  *
***********************************************************************-->
<Page x:Class="RingClientUWP.Views.SmartPanel"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:controls="using:RingClientUWP.Controls"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="using:RingClientUWP"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:views="using:RingClientUWP.Views"
      NavigationCacheMode="Enabled"
      mc:Ignorable="d">

    <Page.Resources>
        <!--  template for AccountListItems.  -->
        <DataTemplate x:Key="AccountListItemsTemplate" x:DataType="controls:AccountListItem">
            <Grid Margin="0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="260" />
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0"
                       x:Name="_AccountTypeIcon_"
                       Width="32"
                       Height="48"
                       Margin="5,0"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Source="{x:Bind _account.accountType_, Converter={StaticResource _AccountTypeToSourceImage_}, Mode=OneWay}" />
                <!--  display share/home/about  -->
                <Grid Visibility="{x:Bind _account.accountType_, Converter={StaticResource _RingAccountTypeToVisibility_}, Mode=OneWay}">
                    <Button Grid.Column="1"
                            x:Name="_shareMenuButton_"
                            VerticalAlignment="Bottom"
                            Click="_shareMenuButton__Click"
                            Style="{StaticResource FlatRoundShareListItemButton}"
                            Visibility="{x:Bind _isSelected, Converter={StaticResource _AccountSelectedToVisibility_}, Mode=OneWay}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_share_menu_" />
                        </ToolTipService.ToolTip>
                    </Button>
                    <Grid.RenderTransform>
                        <TranslateTransform X="244" Y="2" />
                    </Grid.RenderTransform>
                </Grid>
                <!--  edit acccount  -->
                <Button Grid.Column="1"
                        x:Name="_editAccountMenuButton_"
                        Width="31"
                        Height="36"
                        Click="_editAccountMenuButton__Click"
                        Content="&#xE115;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="18"
                        Style="{StaticResource FlatRoundSettingsListItemButton}"
                        Visibility="{x:Bind _isSelected, Converter={StaticResource _AccountSelectedToVisibility_}, Mode=OneWay}">
                    <ToolTipService.ToolTip>
                        <TextBlock x:Uid="_tt_edit_account_" />
                    </ToolTipService.ToolTip>
                    <Button.RenderTransform>
                        <TranslateTransform X="218" Y="10" />
                    </Button.RenderTransform>
                </Button>
                <StackPanel Grid.Column="1" Orientation="Vertical">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="180" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0"
                                   x:Name="_accountName_"
                                   Style="{StaticResource TextStyle5}"
                                   Text="{x:Bind _account._bestName3, Mode=OneWay}" />
                        <TextBlock Grid.Column="1"
                                   x:Name="_registrationState_"
                                   Margin="0,0,22,0"
                                   HorizontalAlignment="Right"
                                   FontSize="12"
                                   FontWeight="Bold"
                                   Foreground="{x:Bind _account, Converter={StaticResource _AccountRegistrationStateToForeground_}, Mode=OneWay}"
                                   Text="{x:Bind _account, Converter={StaticResource _AccountRegistrationStateToString_}, Mode=OneWay}" />
                    </Grid>
                    <Grid>
                        <TextBlock x:Name="_ringID_"
                                   Width="160"
                                   Style="{StaticResource TextStyle6}"
                                   Text="{x:Bind _account.ringID_, Mode=OneWay}"
                                   TextTrimming="CharacterEllipsis"
                                   Visibility="{x:Bind _account.ringID_, Converter={StaticResource _CollapseEmptyString_}, Mode=OneWay}">
                            <ToolTipService.ToolTip>
                                <TextBlock Text="{x:Bind _account.ringID_, Mode=OneWay}" />
                            </ToolTipService.ToolTip>
                        </TextBlock>
                    </Grid>
                    <StackPanel Orientation="Horizontal">
                        <Border x:Name="_unreadAccountNotifications_"
                                Width="20"
                                Height="14"
                                Padding="0"
                                Style="{StaticResource BorderStyle2}"
                                Visibility="{x:Bind _account._allUnread, Converter={StaticResource _MoreThanZeroToVisibility_}, Mode=OneWay}">
                            <TextBlock VerticalAlignment="Bottom"
                                       FontSize="12"
                                       Style="{StaticResource TextStyle3}"
                                       Text="{x:Bind _account, Converter={StaticResource _UnreadAccountNotificationsString_}, ConverterParameter=Summary, Mode=OneWay}">
                                <ToolTipService.ToolTip>
                                    <TextBlock Text="{x:Bind _account, Converter={StaticResource _UnreadAccountNotificationsString_}, Mode=OneWay}" />
                                </ToolTipService.ToolTip>
                            </TextBlock>
                            <Border.RenderTransform>
                                <TranslateTransform X="0" Y="4" />
                            </Border.RenderTransform>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </DataTemplate>

        <!--  template for RingDeviceItems.  -->
        <DataTemplate x:Key="RingDeviceItemsTemplate" x:DataType="controls:RingDeviceItem">
            <Grid Margin="10" HorizontalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="52" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="42" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"
                               x:Uid="_deviceName_"
                               VerticalAlignment="Center"
                               FontWeight="Bold" />
                    <TextBlock Grid.Column="1"
                               x:Name="_deviceName_"
                               Width="180"
                               VerticalAlignment="Center"
                               Text="{x:Bind _deviceName, Mode=OneWay}"
                               TextTrimming="CharacterEllipsis" />
                    <Button Grid.Column="2"
                            x:Name="_revokeDeviceButton_"
                            Width="38"
                            Height="32"
                            Margin="4,0,0,0"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="_revokeDeviceButton__Click"
                            Content="&#xE74D;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="19"
                            Style="{StaticResource FlatRoundListItemButton}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_revoke_device_" />
                        </ToolTipService.ToolTip>
                    </Button>
                </Grid>
                <Grid Grid.Row="1" Margin="0,10,0,0">
                    <TextBlock x:Name="_deviceId_"
                               VerticalAlignment="Center"
                               FontSize="12"
                               Text="{x:Bind _deviceId, Mode=OneWay}"
                               TextTrimming="CharacterEllipsis" />
                </Grid>
            </Grid>
        </DataTemplate>

        <!--  template for smartpanelitems.  -->
        <DataTemplate x:Key="SmartPanelItemsTemplate" x:DataType="controls:SmartPanelItem">
            <Grid DoubleTapped="SmartPanelItem_Grid_DoubleTapped"
                  PointerEntered="SmartPanelItem_Grid_PointerEntered"
                  PointerExited="SmartPanelItem_Grid_PointerExited"
                  PointerMoved="SmartPanelItem_Grid_PointerMoved"
                  RightTapped="SmartPanelItem_Grid_RightTapped"
                  Visibility="{x:Bind _isVisible, Mode=OneWay}">
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout x:Name="_SPI_MenuFlyout_"
                                LightDismissOverlayMode="Off"
                                Placement="Bottom">
                        <MenuFlyoutItem x:Name="_videoCall_MenuFlyoutItem_"
                                        x:Uid="_call_"
                                        Tapped="_videocall_MenuFlyoutItem_Tapped" />
                        <MenuFlyoutItem x:Name="_addToConference_MenuFlyoutItem_"
                                        x:Uid="_add_to_conference_"
                                        Tapped="_addToConference_MenuFlyoutItem__Tapped"
                                        Visibility="{x:Bind _contact, Converter={StaticResource _ContactConferenceableToVisibility_}, Mode=OneWay}" />
                        <MenuFlyoutSeparator />
                        <MenuFlyoutItem x:Name="_copyRingID_MenuFlyoutItem_"
                                        x:Uid="_copy_ring_id_"
                                        Tapped="_copyRingID_MenuFlyoutItem__Tapped"
                                        Visibility="{x:Bind _contact, Converter={StaticResource _ContactAccountTypeToVisibility_}, ConverterParameter=RING, Mode=OneWay}" />
                        <MenuFlyoutItem x:Name="_removeContact_MenuFlyoutItem_"
                                        x:Uid="_remove_contact_"
                                        Tapped="_removeContact_MenuFlyoutItem__Tapped" />
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <!--  the first rectangle helps to detect mouse overing  -->
                <Rectangle Fill="Transparent" />
                <!--  curtain over item with contact not ready (e.g. lookup is in progress)  -->
                <Rectangle Canvas.ZIndex="2"
                           Fill="White"
                           IsHitTestVisible="False"
                           Opacity="0.6"
                           Visibility="{x:Bind _contact._contactStatus, Converter={StaticResource _ContactStatusNotification_}, Mode=OneWay}" />
                <!--  contact.  -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="320" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="60" />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="*" MinWidth="200" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <!--  black magic replaced  -->
                            <StackPanel>
                                <Grid x:Name="_contactAvatarGrid_">
                                    <Ellipse x:Name="_contactAvatarEllipse_"
                                             Width="50"
                                             Height="50"
                                             Margin="5"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"
                                             Canvas.ZIndex="3"
                                             Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallEllipse_}, ConverterParameter=Inverted, Mode=OneWay}">
                                        <Ellipse.Fill>
                                            <ImageBrush x:Name="_contactAvatar_" ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}" />
                                        </Ellipse.Fill>
                                    </Ellipse>
                                    <Ellipse x:Name="_contactAvatarEllipse2_"
                                             Width="50"
                                             Height="50"
                                             Margin="5"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"
                                             Canvas.ZIndex="2"
                                             Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallEllipse_}, Mode=OneWay}">
                                        <Ellipse.Fill>
                                            <ImageBrush x:Name="_contactAvatar2_" ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}" />
                                        </Ellipse.Fill>
                                        <Ellipse.Triggers>
                                            <EventTrigger>
                                                <BeginStoryboard>
                                                    <Storyboard x:Name="_incomingCallStoryboard_">
                                                        <DoubleAnimation AutoReverse="True"
                                                                         RepeatBehavior="Forever"
                                                                         Storyboard.TargetName="_contactAvatarEllipse2_"
                                                                         Storyboard.TargetProperty="Opacity"
                                                                         From="1"
                                                                         To="0.25"
                                                                         Duration="0:0:1" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </Ellipse.Triggers>
                                    </Ellipse>
                                    <Grid Visibility="{x:Bind _contact, Converter={StaticResource _HasAvatarToVisibility_}, ConverterParameter=Inverted, Mode=OneWay}">
                                        <Grid x:Name="_defaultAvatarGrid_"
                                              Width="50"
                                              Height="50"
                                              Canvas.ZIndex="1"
                                              Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallEllipse_}, ConverterParameter=Inverted, Mode=OneWay}">
                                            <Ellipse x:Name="_defaultAvatar_" Fill="{x:Bind _contact._avatarColorBrush, Mode=OneWay}" />
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       FontFamily="Arial"
                                                       FontSize="30"
                                                       Foreground="White"
                                                       Text="{x:Bind _contact._bestName2, Converter={StaticResource _NameToInitialConverter_}, Mode=OneWay}"
                                                       TextAlignment="Center" />
                                        </Grid>
                                        <Grid x:Name="_defaultAvatarGrid2_"
                                              Width="50"
                                              Height="50"
                                              Canvas.ZIndex="0"
                                              Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallEllipse_}, Mode=OneWay}">
                                            <Ellipse x:Name="_defaultAvatar2_" Fill="{x:Bind _contact._avatarColorBrush, Mode=OneWay}" />
                                            <TextBlock HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       FontFamily="Arial"
                                                       FontSize="30"
                                                       Foreground="White"
                                                       Text="{x:Bind _contact._bestName2, Converter={StaticResource _NameToInitialConverter_}, Mode=OneWay}"
                                                       TextAlignment="Center" />
                                            <Grid.Triggers>
                                                <EventTrigger>
                                                    <BeginStoryboard>
                                                        <Storyboard x:Name="_incomingCallStoryboard2_">
                                                            <DoubleAnimation AutoReverse="True"
                                                                             RepeatBehavior="Forever"
                                                                             Storyboard.TargetName="_defaultAvatarGrid2_"
                                                                             Storyboard.TargetProperty="Opacity"
                                                                             From="1"
                                                                             To="0.25"
                                                                             Duration="0:0:1" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </EventTrigger>
                                            </Grid.Triggers>
                                        </Grid>
                                    </Grid>
                                </Grid>
                                <Grid>
                                    <Ellipse x:Name="_presenceNotificationCircle_"
                                             Width="14"
                                             Height="14"
                                             Fill="{x:Bind _contact._presenceStatus, Converter={StaticResource _PresenceStatus_}, Mode=OneWay}"
                                             IsHitTestVisible="False"
                                             Stroke="{x:Bind _contact._presenceStatus, Converter={StaticResource _PresenceStatus_}, ConverterParameter=Border, Mode=OneWay}"
                                             StrokeThickness="1.5"
                                             Visibility="Visible">
                                        <Ellipse.RenderTransform>
                                            <TranslateTransform X="16" Y="-21" />
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                </Grid>
                            </StackPanel>
                            <Border x:Name="_visualNotificationNewMessage_"
                                    Width="24"
                                    Height="20"
                                    Padding="2"
                                    Style="{StaticResource BorderStyle2}"
                                    Visibility="{x:Bind _contact._unreadMessages, Converter={StaticResource _NewMessageBubbleNotification_}, Mode=OneWay}">
                                <TextBlock VerticalAlignment="Bottom"
                                           FontSize="14"
                                           Style="{StaticResource TextStyle3}"
                                           Text="{x:Bind _contact._unreadMessages, Converter={StaticResource _NewMessageNotificationToNumber_}, Mode=OneWay}" />
                                <Border.RenderTransform>
                                    <TranslateTransform X="-17" Y="-58" />
                                </Border.RenderTransform>
                            </Border>
                        </StackPanel>

                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="60" />
                                <RowDefinition Height="30" />
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Padding="0,4,0,0">
                                <!--  name of the contact.  -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0"
                                               x:Name="_contactName_"
                                               MaxWidth="180"
                                               Text="{x:Bind _contact._bestName, Mode=OneWay}"
                                               TextTrimming="CharacterEllipsis">
                                        <ToolTipService.ToolTip>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Text="{x:Bind _contact._bestName, Mode=OneWay}" />
                                            </StackPanel>
                                        </ToolTipService.ToolTip>
                                    </TextBlock>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <ProgressBar Width="80"
                                                     Padding="4,0,4,0"
                                                     HorizontalAlignment="Right"
                                                     Foreground="#333333"
                                                     IsIndeterminate="True"
                                                     Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusToSpinnerVisibility_}, Mode=OneWay}" />
                                        <ProgressBar Width="80"
                                                     Padding="4,0,4,0"
                                                     HorizontalAlignment="Right"
                                                     Canvas.ZIndex="3"
                                                     Foreground="#333333"
                                                     IsIndeterminate="True"
                                                     Visibility="{x:Bind _contact._contactStatus, Converter={StaticResource _ContactStatusNotification_}, Mode=OneWay}" />
                                    </StackPanel>
                                </Grid>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="_contactLastTime_"
                                               MaxWidth="180"
                                               FontSize="10"
                                               FontStyle="Italic"
                                               Foreground="#FF333333"
                                               Text="{x:Bind _contact._lastTime, Mode=OneWay}"
                                               TextTrimming="CharacterEllipsis" />
                                </StackPanel>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0"
                                               x:Uid="_contactRequestSent_"
                                               MaxWidth="200"
                                               FontSize="12"
                                               FontStyle="Italic"
                                               Foreground="#FF339933"
                                               TextTrimming="CharacterEllipsis"
                                               Visibility="{x:Bind _contact._trustStatus, Converter={StaticResource _PartialTrustToVisibility_}, Mode=OneWay}" />
                                    <!--  call action buttons.  -->
                                    <Grid Grid.Column="1"
                                          x:Name="_callActionButtonGrid_"
                                          Margin="5,5,7,5"
                                          HorizontalAlignment="Right">
                                        <Grid.RenderTransform>
                                            <TranslateTransform X="0" Y="-19" />
                                        </Grid.RenderTransform>
                                        <Button Grid.Row="0"
                                                x:Name="_callBtn_"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Bottom"
                                                Content="&#xE116;"
                                                FontFamily="Segoe MDL2 Assets"
                                                GotFocus="_callBtn__Click"
                                                Style="{StaticResource FlatRoundListItemButton}"
                                                Visibility="{x:Bind _isCallable, Converter={StaticResource _boolToVisibility_}, Mode=OneWay}">
                                            <ToolTipService.ToolTip>
                                                <TextBlock x:Uid="_tt_video_call_" />
                                            </ToolTipService.ToolTip>
                                        </Button>
                                        <StackPanel Grid.Row="0"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Bottom"
                                                    Orientation="Horizontal"
                                                    Visibility="Visible">
                                            <Button x:Name="_acceptIncomingCallBtn_"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Content="&#xE10B;"
                                                    FontFamily="Segoe MDL2 Assets"
                                                    GotFocus="_acceptIncomingCallBtn__Click"
                                                    Style="{StaticResource FlatRoundListItemButton}"
                                                    Visibility="{x:Bind _callStatus, Converter={StaticResource _IncomingVisibility_}, Mode=OneWay}">
                                                <ToolTipService.ToolTip>
                                                    <TextBlock x:Uid="_tt_accept_call_" />
                                                </ToolTipService.ToolTip>
                                            </Button>
                                            <Button x:Name="_rejectIncomingCallBtn_"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    Content="&#xE10A;"
                                                    FontFamily="Segoe MDL2 Assets"
                                                    GotFocus="_rejectIncomingCallBtn__Click"
                                                    Style="{StaticResource FlatRoundListItemButton}"
                                                    Visibility="{x:Bind _callStatus, Converter={StaticResource _IncomingVisibility_}, Mode=OneWay}">
                                                <ToolTipService.ToolTip>
                                                    <TextBlock x:Uid="_tt_reject_call_" />
                                                </ToolTipService.ToolTip>
                                            </Button>
                                        </StackPanel>
                                        <Button x:Name="_cancelCallBtn_"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Bottom"
                                                Content="&#xE10A;"
                                                FontFamily="Segoe MDL2 Assets"
                                                GotFocus="_cancelCallBtn__Click"
                                                Style="{StaticResource FlatRoundListItemButton}"
                                                Visibility="{x:Bind _callStatus, Converter={StaticResource _OutGoingVisibility_}, Mode=OneWay}">
                                            <ToolTipService.ToolTip>
                                                <TextBlock x:Uid="_tt_cancel_call_" />
                                            </ToolTipService.ToolTip>
                                        </Button>
                                    </Grid>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>

        <!--  template for ContactRequestItems.  -->
        <DataTemplate x:Key="ContactRequestItemsTemplate" x:DataType="controls:ContactRequestItem">
            <!--<StackPanel Visibility="{x:Bind _contact, Converter={StaticResource _SelectedAccountToVisibility_}, Mode=OneWay}">-->
            <StackPanel>
                <Grid PointerEntered="ContactRequestItem_Grid_PointerEntered"
                      PointerExited="ContactRequestItem_Grid_PointerExited"
                      PointerMoved="ContactRequestItem_Grid_PointerMoved"
                      PointerReleased="ContactRequestItem_Grid_PointerReleased"
                      Visibility="{x:Bind _isVisible, Mode=OneWay}">
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="320" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60" />
                            <!--  use the height of _contactBar_ to make it visible or collapsed.  -->
                            <RowDefinition x:Name="_contactBar_" Height="{x:Bind _contact._contactBarHeight, Mode=OneWay}" />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition Width="*" MinWidth="200" />
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0">
                                <Ellipse Width="50"
                                         Height="50"
                                         Margin="5"
                                         HorizontalAlignment="Center"
                                         VerticalAlignment="Center"
                                         Canvas.ZIndex="1">
                                    <Ellipse.Fill>
                                        <ImageBrush x:Name="_contactAvatar_" ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}" />
                                    </Ellipse.Fill>
                                </Ellipse>
                                <Grid Width="50"
                                      Height="50"
                                      Margin="5"
                                      Canvas.ZIndex="0">
                                    <Ellipse x:Name="_defaultAvatar_" Fill="{x:Bind _contact._avatarColorBrush, Mode=OneWay}" />
                                    <TextBlock HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontFamily="Arial"
                                               FontSize="30"
                                               Foreground="White"
                                               Text="{x:Bind _contact._bestName2, Converter={StaticResource _NameToInitialConverter_}, Mode=OneWay}"
                                               TextAlignment="Center" />
                                </Grid>
                            </Grid>
                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0"
                                            Margin="0,3,0,0"
                                            Orientation="Vertical">
                                    <!--  name of the contact.  -->
                                    <TextBlock x:Name="_contactName_"
                                               MaxWidth="240"
                                               HorizontalAlignment="Left"
                                               FontSize="14"
                                               Text="{x:Bind _contact._name, Mode=OneWay}"
                                               TextTrimming="CharacterEllipsis">
                                        <ToolTipService.ToolTip>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Text="{x:Bind _contact._name, Mode=OneWay}" />
                                            </StackPanel>
                                        </ToolTipService.ToolTip>
                                    </TextBlock>
                                    <TextBlock x:Uid="_contactRequestPending_"
                                               MaxWidth="200"
                                               HorizontalAlignment="Left"
                                               FontSize="12"
                                               FontStyle="Italic"
                                               Foreground="#FF339933"
                                               TextTrimming="CharacterEllipsis" />
                                </StackPanel>
                                <StackPanel Grid.Row="0"
                                            Margin="0,0,6,6"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Bottom"
                                            Orientation="Horizontal"
                                            Visibility="Visible">
                                    <Button x:Name="_acceptContactRequestBtn_"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Bottom"
                                            Click="_acceptContactRequestBtn__Click"
                                            Content="&#xE10B;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Style="{StaticResource FlatRoundListItemButton}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock x:Uid="_tt_accept_cr_" />
                                        </ToolTipService.ToolTip>
                                    </Button>
                                    <Button x:Name="_rejectContactRequestBtn_"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Bottom"
                                            Click="_rejectContactRequestBtn__Click"
                                            Content="&#xE10A;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Style="{StaticResource FlatRoundListItemButton}">
                                        <ToolTipService.ToolTip>
                                            <TextBlock x:Uid="_tt_ingnore_cr_" />
                                        </ToolTipService.ToolTip>
                                    </Button>
                                    <Button x:Name="_blockContactBtn_"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Bottom"
                                            Click="_blockContactBtn__Click"
                                            Content="&#xE8F8;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Style="{StaticResource FlatRoundListItemButton}">
                                        <ToolTipService.ToolTip>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock x:Uid="_tt_block_cr_" TextWrapping="Wrap" />
                                                <TextBlock x:Uid="_tt_block_cr_2"
                                                           FontStyle="Italic"
                                                           TextWrapping="Wrap" />
                                            </StackPanel>
                                        </ToolTipService.ToolTip>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </StackPanel>
        </DataTemplate>

        <!--  template for BannedContactTemplate.  -->
        <DataTemplate x:Key="BannedContactTemplate" x:DataType="controls:SmartPanelItem">
            <StackPanel>
                <Grid Background="{StaticResource RingBlueHighLight3Brush}" Visibility="{x:Bind _isVisible, Mode=OneWay}">
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="260" />
                        </Grid.ColumnDefinitions>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition Width="*" MinWidth="200" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Canvas.ZIndex="1">
                                <Ellipse Width="50"
                                         Height="50"
                                         Margin="5"
                                         HorizontalAlignment="Center"
                                         VerticalAlignment="Center">
                                    <Ellipse.Fill>
                                        <ImageBrush x:Name="_contactAvatar_" ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}" />
                                    </Ellipse.Fill>
                                </Ellipse>
                            </StackPanel>
                            <Grid Grid.Column="0"
                                  Width="50"
                                  Height="50"
                                  Margin="5"
                                  Canvas.ZIndex="0">
                                <Ellipse x:Name="_defaultAvatar_" Fill="{x:Bind _contact._avatarColorBrush, Mode=OneWay}" />
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontFamily="Arial"
                                           FontSize="30"
                                           Foreground="White"
                                           Text="{x:Bind _contact._bestName2, Converter={StaticResource _NameToInitialConverter_}, Mode=OneWay}"
                                           TextAlignment="Center" />
                            </Grid>
                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60" />
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0"
                                            Margin="0,3,0,0"
                                            Orientation="Vertical">
                                    <!--  name of the contact.  -->
                                    <TextBlock x:Name="_contactName_"
                                               MaxWidth="180"
                                               HorizontalAlignment="Left"
                                               FontSize="14"
                                               Text="{x:Bind _contact._name, Mode=OneWay}"
                                               TextTrimming="CharacterEllipsis">
                                        <ToolTipService.ToolTip>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Text="{x:Bind _contact._name, Mode=OneWay}" />
                                            </StackPanel>
                                        </ToolTipService.ToolTip>
                                    </TextBlock>
                                </StackPanel>
                                <StackPanel Grid.Row="0"
                                            Margin="0,0,6,6"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Bottom"
                                            Orientation="Horizontal"
                                            Visibility="Visible">
                                    <Button x:Name="_addBannedContactBtn_"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Bottom"
                                            Click="_addBannedContactBtn__Click"
                                            Content="&#xE8FA;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Style="{StaticResource FlatRoundListItemButton}">
                                        <ToolTipService.ToolTip>
                                            <StackPanel Orientation="Vertical">
                                                <TextBlock x:Uid="_tt_add_banned_" />
                                            </StackPanel>
                                        </ToolTipService.ToolTip>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <!--  connectivity notification.  -->
            <RowDefinition x:Name="_networkConnectivityNotificationRow_" Height="32" />
            <!--  where accounts and share menu drop down are.  -->
            <RowDefinition Height="auto" />
            <!--  where contacts and settings are.  -->
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Background="#FFFF4343">
            <TextBlock x:Uid="_network_unavailable_"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       FontSize="12"
                       Foreground="White" />
        </Grid>
        <!--  drop down menus.  -->
        <Grid Grid.Row="1" Background="{StaticResource RingBlueMidBrush}">
            <Grid.RowDefinitions>
                <!--  where the selected account is shown.  -->
                <RowDefinition x:Name="_selectedAccountRow_" Height="60" />
                <!--  where the drop down menus are shown.  -->
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <!--  selected account.  -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="_selectedAccountAvatarColumn_" Width="60" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Ellipse Grid.Column="0"
                         x:Name="_selectedAccountAvatarContainer_"
                         Width="50"
                         Height="50"
                         Margin="0"
                         PointerEntered="_selectedAccountAvatarContainer__PointerEntered"
                         PointerExited="_selectedAccountAvatarContainer__PointerExited"
                         PointerReleased="_selectedAccountAvatarContainer__PointerReleased">
                    <Ellipse.Fill>
                        <ImageBrush x:Name="_selectedAccountAvatar_" ImageSource="Assets\TESTS\contactAvatar.png" />
                    </Ellipse.Fill>
                </Ellipse>
                <Ellipse Grid.Column="0"
                         x:Name="_shaderPhotoboothIcon_"
                         Width="50"
                         Height="50"
                         Margin="5"
                         Fill="Black"
                         IsHitTestVisible="False"
                         Opacity="0.3"
                         Visibility="Collapsed" />
                <TextBlock Grid.Column="0"
                           x:Name="_photoboothIcon_"
                           IsHitTestVisible="False"
                           Style="{StaticResource TextSegoeStyle-Centered-40pt-white}"
                           Text="&#xE722;"
                           Visibility="Collapsed" />
                <StackPanel Grid.Column="1" VerticalAlignment="Bottom">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="_selectedAccountName_"
                                   MaxWidth="125"
                                   Margin="4,6,6,4"
                                   VerticalAlignment="Center"
                                   FontSize="18px"
                                   FontWeight="SemiLight"
                                   Style="{StaticResource TextStyle2}"
                                   Text="[TEXT MISSING]"
                                   TextTrimming="CharacterEllipsis" />
                        <TextBlock x:Name="_selectedAccountUsername_"
                                   MaxWidth="120"
                                   Margin="4,6,6,4"
                                   VerticalAlignment="Center"
                                   FontSize="18px"
                                   FontWeight="Light"
                                   Foreground="#FFF0F0F0"
                                   Style="{StaticResource TextStyle2}"
                                   Text=""
                                   TextTrimming="CharacterEllipsis" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <!--  contacts list  -->
                        <Grid>
                            <ToggleButton x:Name="_contactsListMenuButton_"
                                          VerticalAlignment="Bottom"
                                          Click="_contactsListMenuButton__Click"
                                          Content="&#xe716;"
                                          Style="{StaticResource FlatToggleButton}">
                                <ToolTipService.ToolTip>
                                    <TextBlock x:Uid="_tt_contact_list_menu_" />
                                </ToolTipService.ToolTip>
                            </ToggleButton>
                            <Ellipse x:Name="_unreadMessagesCircle_"
                                     Width="8"
                                     Height="8"
                                     Fill="OrangeRed"
                                     IsHitTestVisible="False"
                                     Stroke="OrangeRed"
                                     StrokeThickness="1"
                                     Visibility="Collapsed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="11" Y="-8" />
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadMessagesAnimation_">
                                                <DoubleAnimation AutoReverse="True"
                                                                 RepeatBehavior="Forever"
                                                                 Storyboard.TargetName="_unreadMessagesCircle_"
                                                                 Storyboard.TargetProperty="Opacity"
                                                                 From="1.0"
                                                                 To="0.4"
                                                                 Duration="0:0:1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!--  contact request list  -->
                        <Grid>
                            <ToggleButton x:Name="_contactRequestListMenuButton_"
                                          VerticalAlignment="Bottom"
                                          Click="_contactRequestListMenuButton__Click"
                                          Content="&#xe8fa;"
                                          Style="{StaticResource FlatToggleButton}">
                                <ToolTipService.ToolTip>
                                    <TextBlock x:Uid="_tt_cr_list_menu_" />
                                </ToolTipService.ToolTip>
                            </ToggleButton>
                            <Ellipse x:Name="_unreadContactRequestsCircle_"
                                     Width="8"
                                     Height="8"
                                     Fill="OrangeRed"
                                     IsHitTestVisible="False"
                                     Stroke="OrangeRed"
                                     StrokeThickness="1"
                                     Visibility="Collapsed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="11" Y="-8" />
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadContactRequestsAnimation_">
                                                <DoubleAnimation AutoReverse="True"
                                                                 RepeatBehavior="Forever"
                                                                 Storyboard.TargetName="_unreadContactRequestsCircle_"
                                                                 Storyboard.TargetProperty="Opacity"
                                                                 From="1.0"
                                                                 To="0.4"
                                                                 Duration="0:0:1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!--  account menu  -->
                        <Grid>
                            <ToggleButton x:Name="_accountsMenuButton_"
                                          VerticalAlignment="Bottom"
                                          Click="_accountsMenuButton__Click"
                                          Content="&#xE168;"
                                          Style="{StaticResource FlatToggleButton}">
                                <ToolTipService.ToolTip>
                                    <TextBlock x:Uid="_tt_account_list_menu_" />
                                </ToolTipService.ToolTip>
                            </ToggleButton>
                            <Ellipse x:Name="_unreadAccountNotificationsCircle_"
                                     Width="8"
                                     Height="8"
                                     Fill="OrangeRed"
                                     IsHitTestVisible="False"
                                     Stroke="OrangeRed"
                                     StrokeThickness="1"
                                     Visibility="Collapsed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="11" Y="-8" />
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadAccountMessagesAnimation_">
                                                <DoubleAnimation AutoReverse="True"
                                                                 RepeatBehavior="Forever"
                                                                 Storyboard.TargetName="_unreadAccountNotificationsCircle_"
                                                                 Storyboard.TargetProperty="Opacity"
                                                                 From="1.0"
                                                                 To="0.4"
                                                                 Duration="0:0:1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!--  _devicesMenuButton_  -->
                        <ToggleButton x:Name="_devicesMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Click="_devicesMenuButton__Click"
                                      Content="&#xE836;"
                                      Style="{StaticResource FlatToggleButton}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_devices_list_menu_" />
                            </ToolTipService.ToolTip>
                        </ToggleButton>
                        <!--  _settingsMenuButton_  -->
                        <ToggleButton x:Name="_settingsMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Click="_settingsMenuButton__Click"
                                      Content="&#xE90F;"
                                      Style="{StaticResource FlatToggleButton}">
                            <ToolTipService.ToolTip>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="_tt_settings_menu_" />
                                </StackPanel>
                            </ToolTipService.ToolTip>
                        </ToggleButton>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!--
                sub menus like the accounts list or the share menu are just below, technicaly they are nested inside the
                same row. To summon them we use the visibility of their own grid, by linking it to a toggle button
            -->

        </Grid>

        <!--  smartList and settings.  -->
        <Grid Grid.Row="2" Background="{StaticResource RingBlueLightBrush}">
            <!--  accounts menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_accountsMenuGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_accountsTitle_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <ScrollViewer Grid.Row="1"
                              x:Name="_accountsListScrollView_"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollMode="Enabled">
                    <ListBox x:Name="_accountsList_"
                             Width="320"
                             Background="{StaticResource RingBlueLightBrush}"
                             ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                             ItemTemplate="{StaticResource AccountListItemsTemplate}"
                             SelectionChanged="_accountList__SelectionChanged" />
                </ScrollViewer>
                <StackPanel Grid.Row="2"
                            Background="{StaticResource RingBlueMidBrush}"
                            Orientation="Horizontal">
                    <Button x:Name="_addAccountBtn_"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Click="_addAccountBtn__Click"
                            Content="&#xE948;"
                            Style="{StaticResource AccountMenuButtonStyle}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_add_account_" />
                        </ToolTipService.ToolTip>
                    </Button>
                    <Button x:Name="_linkThisDeviceBtn_"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Click="_linkThisDeviceBtn__Click"
                            Content="&#xE836;"
                            Style="{StaticResource AccountMenuButtonStyle}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_link_device_" />
                        </ToolTipService.ToolTip>
                    </Button>
                    <Button x:Name="_deleteAccountButton_"
                            Width="106"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Click="_deleteAccountButton__Click"
                            Content="&#xE74D;"
                            Style="{StaticResource AccountMenuButtonStyle}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_delete_account_" />
                        </ToolTipService.ToolTip>
                    </Button>
                </StackPanel>
            </Grid>
            <!--  account edition menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_accountEditionGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_accountEditionTitle_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <ScrollViewer Grid.Row="1" x:Name="_scrollViewerEditionMenu_">
                    <StackPanel Padding="0,10,0,20"
                                Background="{StaticResource RingBlueLightBrush}"
                                Orientation="Vertical">
                        <!--  enabled  -->
                        <StackPanel Margin="20,20,10,10" Orientation="Horizontal">
                            <TextBlock Margin="0,0,10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Text="&#xED5C;" />
                            <TextBlock x:Uid="_accountsEnabled_" />
                        </StackPanel>
                        <ToggleSwitch x:Name="_enabledState_" Margin="30,0,20,10" />
                        <!--  alias sub menu.  -->
                        <StackPanel Margin="10,30,0,10"
                                    Padding="10,0"
                                    Orientation="Horizontal">
                            <TextBlock Margin="0,0,10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Text="&#xE8EC;" />
                            <TextBlock x:Uid="_accountsAlias_" />
                        </StackPanel>
                        <Grid Margin="10" Padding="10,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="25" />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     x:Name="_accountAliasTextBoxEdition_"
                                     x:Uid="_accountAliasTextBoxUid_"
                                     Margin="10,0,10,0"
                                     IsSpellCheckEnabled="False"
                                     TextChanged="_accountAliasTextBoxEdition__TextChanged" />
                            <TextBlock Grid.Column="1"
                                       x:Name="_accountAliasValidEdition_"
                                       Padding="10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-green}"
                                       Text="&#xE10B;"
                                       Visibility="Collapsed" />
                            <TextBlock Grid.Column="1"
                                       x:Name="_accountAliasInvalidEdition_"
                                       Padding="10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-red}"
                                       Text="&#xE10A;" />
                        </Grid>
                        <!--  edition sub menu.  -->
                        <StackPanel x:Name="_ringStackEdition_"
                                    Margin="0,10,0,0"
                                    Padding="10,0">
                            <!--  register account on blockachain  -->
                            <StackPanel Margin="10,20,0,10" Orientation="Horizontal">
                                <TextBlock Margin="0,0,10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Text="&#xE167;" />
                                <TextBlock x:Uid="_accountsRegisterPublicName_" />
                            </StackPanel>
                            <ToggleSwitch x:Name="_RegisterStateEdition_"
                                          Margin="20,0,20,10"
                                          IsOn="True"
                                          Toggled="_RegisterStateEdition__Toggled" />
                            <TextBlock x:Name="_whatWillHappenEdition_"
                                       x:Uid="_whatWillHappenEditionUid_"
                                       Margin="20,10,0,0"
                                       Style="{StaticResource BodyTextBlockStyle}" />
                            <HyperlinkButton x:Uid="_accountsEditionLearnMore_"
                                             Margin="20,0,0,10"
                                             NavigateUri="http://ring.cx" />
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0"
                                         x:Name="_usernameTextBoxEdition_"
                                         x:Uid="_usernameTextBoxEditionUid_"
                                         Margin="10,0,10,0"
                                         IsSpellCheckEnabled="False"
                                         KeyUp="_usernameTextBoxEdition__KeyUp" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_usernameValidEdition_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Text="&#xE10B;"
                                           Visibility="Collapsed" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_usernameInvalidEdition_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;" />
                            </Grid>
                            <Button x:Name="_registerOnBlockchainEdition_"
                                    x:Uid="_registerOnBlockchainEditionUid_"
                                    Click="_registerOnBlockchainEdition__Click"
                                    Visibility="Collapsed" />
                        </StackPanel>
                        <!--  SIP accounts section  -->
                        <!--  SIP parameters.  -->
                        <StackPanel x:Name="_sipAccountStackEdition_"
                                    Margin="0,10,0,0"
                                    Padding="10,0"
                                    Visibility="Collapsed">
                            <StackPanel Margin="10" Orientation="Horizontal">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE717;" />
                                <TextBlock Margin="10" Text="SIP account parameters" />
                            </StackPanel>
                            <TextBox x:Name="_sipHostnameEdition_"
                                     x:Uid="_sipHostnameEditionUid_"
                                     Margin="20,10,20,10"
                                     IsSpellCheckEnabled="False" />
                            <TextBox x:Name="_sipUsernameEditionTextBox_"
                                     x:Uid="_sipUsernameEditionTextBoxUid_"
                                     Margin="20,10,20,10"
                                     IsSpellCheckEnabled="False" />
                            <PasswordBox x:Name="_sipPasswordEdition_"
                                         x:Uid="_sipPasswordEditionUid_"
                                         Margin="20,10,20,10" />
                        </StackPanel>
                        <!--  END SIP accounts section  -->
                        <!--  other settings  -->
                        <!--  auto answer  -->
                        <StackPanel Margin="10,20,10,0"
                                    Padding="10,0"
                                    Orientation="Horizontal">
                            <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE8D0;" />
                            <TextBlock x:Uid="_accountsAutoAnswer_"
                                       Margin="10,20,10,10"
                                       TextWrapping="Wrap" />
                        </StackPanel>
                        <ToggleSwitch x:Name="_autoAnswerToggle_"
                                      Margin="30,0,20,10"
                                      Padding="10,0"
                                      IsOn="False" />
                        <!--  RING accounts section  -->
                        <StackPanel x:Name="_ringStackEdition2_" Visibility="Collapsed">
                            <!--  incognito contacts  -->
                            <StackPanel Margin="10,20,10,0"
                                        Padding="10,0"
                                        Orientation="Horizontal">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE8D7;" />
                                <TextBlock x:Uid="_accountsIncognitoContacts_"
                                           Width="240"
                                           Margin="10"
                                           TextWrapping="Wrap" />
                            </StackPanel>
                            <ToggleSwitch x:Name="_dhtPublicInCallsToggle_"
                                          Margin="30,0,20,10"
                                          Padding="10,0"
                                          IsOn="True" />
                            <!--  turn settings  -->
                            <StackPanel Margin="10,20,10,0"
                                        Padding="10,0"
                                        Orientation="Horizontal">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE8CE;" />
                                <TextBlock x:Uid="_accountsTurnEnabled_"
                                           Width="240"
                                           Margin="10"
                                           TextWrapping="Wrap" />
                            </StackPanel>
                            <ToggleSwitch x:Name="_turnEnabledToggle_"
                                          Margin="30,0,20,10"
                                          Padding="10,0"
                                          IsOn="True"
                                          Toggled="_turnEnabledToggle__Toggled" />
                            <TextBox x:Name="_turnEditionTextBox_"
                                     x:Uid="_turnEditionTextBoxUid_"
                                     Margin="30,10,60,10"
                                     IsSpellCheckEnabled="False" />
                            <!--  upnp state  -->
                            <StackPanel Margin="20,20,10,0" Orientation="Horizontal">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE15E;" />
                                <TextBlock x:Uid="_accountsUPnP_" Margin="10" />
                            </StackPanel>
                            <ToggleSwitch x:Name="_upnpState_" Margin="30,0,20,10" />
                            <!--  banned list  -->
                            <StackPanel Margin="0,10,0,0">
                                <StackPanel Margin="10"
                                            Padding="10,0"
                                            Orientation="Horizontal">
                                    <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE8F8;" />
                                    <HyperlinkButton x:Name="_accountsShowBannedList_"
                                                     Margin="10,0,0,10"
                                                     Click="_showBannedList__PointerPressed"
                                                     Content="Show banned contact list" />
                                </StackPanel>
                                <Grid x:Name="_bannedContactListGrid_" Visibility="Collapsed">
                                    <StackPanel>
                                        <ListBox x:Name="_bannedContactList_"
                                                 MaxWidth="260"
                                                 Margin="0"
                                                 Padding="0"
                                                 Background="{StaticResource RingBlueLightBrush}"
                                                 ItemContainerStyle="{StaticResource bannedContactListBoxStyle}"
                                                 ItemTemplate="{StaticResource BannedContactTemplate}"
                                                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                 ScrollViewer.HorizontalScrollMode="Disabled" />
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                        <!--  END RING accounts section  -->
                    </StackPanel>
                </ScrollViewer>
                <!--  buttons yes/no to accept the modification.  -->
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Grid.Row="1"
                                x:Name="_acceptAccountModification_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_acceptAccountModification__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_accept_account_mod_" />
                            </ToolTipService.ToolTip>
                        </Button>
                        <Button Grid.Row="1"
                                x:Name="_cancelAccountModification_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_cancelAccountModification__Click"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_cancel_account_mod_" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
            <!--  account creation menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_accountCreationMenuGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_accountsCreation_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <ScrollViewer Grid.Row="1" x:Name="_accountCreationMenuScrollViewer_">
                    <StackPanel Padding="0,10,0,20"
                                Background="{StaticResource RingBlueLightBrush}"
                                Orientation="Vertical">
                        <!--  account type chooser  -->
                        <StackPanel Margin="20,20,0,10" Orientation="Horizontal">
                            <TextBlock Margin="0,0,10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Text="&#xE168;" />
                            <TextBlock x:Uid="_accountsType_" />
                        </StackPanel>
                        <ComboBox x:Name="_accountTypeComboBox_"
                                  Width="195"
                                  Margin="30,10,20,10"
                                  VerticalAlignment="Center"
                                  SelectedIndex="0"
                                  SelectionChanged="_accountTypeComboBox__SelectionChanged">
                            <ComboBoxItem Content="Ring" />
                            <ComboBoxItem Content="Sip" />
                        </ComboBox>
                        <!--  alias sub menu.  -->
                        <StackPanel Margin="10,30,0,10"
                                    Padding="10,0"
                                    Orientation="Horizontal">
                            <TextBlock Margin="0,0,10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Text="&#xE8EC;" />
                            <TextBlock x:Uid="_accountsAlias_" />
                        </StackPanel>
                        <Grid Margin="10" Padding="10,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="25" />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     x:Name="_accountAliasTextBox_"
                                     x:Uid="_accountAliasTextBoxUid_"
                                     Margin="10,0,10,0"
                                     IsSpellCheckEnabled="False"
                                     TextChanged="_accountAliasTextBox__TextChanged" />
                            <TextBlock Grid.Column="1"
                                       x:Name="_accountAliasValid_"
                                       Padding="10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-green}"
                                       Text="&#xE10B;"
                                       Visibility="Collapsed" />
                            <TextBlock Grid.Column="1"
                                       x:Name="_accountAliasInvalid_"
                                       Padding="10,0"
                                       Style="{StaticResource TextSegoeStyle-20pt-red}"
                                       Text="&#xE10A;" />
                        </Grid>
                        <!--  RING account.  -->
                        <StackPanel x:Name="_ringAccountCreationStack_"
                                    Margin="20,10,10,10"
                                    Visibility="Visible">
                            <!--  register account on blockachain  -->
                            <StackPanel Margin="0,20" Orientation="Horizontal">
                                <TextBlock Margin="0,0,10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Text="&#xE167;" />
                                <TextBlock x:Uid="_accountsRegisterPublicName_" />
                            </StackPanel>
                            <ToggleSwitch x:Name="_RegisterState_"
                                          Margin="10,0,0,10"
                                          IsOn="True"
                                          Toggled="_RegisterState__Toggled" />
                            <TextBlock x:Name="_whatWillHappen_"
                                       x:Uid="_whatWillHappenEditionUid_"
                                       Margin="10,10,0,0"
                                       Style="{StaticResource BodyTextBlockStyle}" />
                            <HyperlinkButton Margin="10,0,0,10"
                                             Content="Learn more"
                                             NavigateUri="http://ring.cx" />
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0"
                                         x:Name="_usernameTextBox_"
                                         x:Uid="_usernameTextBoxEditionUid_"
                                         Margin="0,0,10,0"
                                         IsSpellCheckEnabled="False"
                                         KeyUp="_usernameTextBox__KeyUp" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_usernameValid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Text="&#xE10B;"
                                           Visibility="Collapsed" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_usernameInvalid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;" />
                            </Grid>
                            <!--  password sub menu.  -->
                            <StackPanel Margin="0,20" Orientation="Horizontal">
                                <TextBlock Margin="0,0,10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Text="&#xE8D7;" />
                                <TextBlock Text="Password" />
                            </StackPanel>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <PasswordBox Grid.Column="0"
                                             x:Name="_ringPasswordBoxAccountCreation_"
                                             x:Uid="_ringPasswordBoxAccountCreationUid_"
                                             Margin="0,0,10,0"
                                             PasswordChanged="_passwordBoxAccountCreationCheck__PasswordChanged" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_passwordValid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Text="&#xE10B;"
                                           Visibility="Collapsed" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_passwordInvalid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;" />
                            </Grid>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <PasswordBox Grid.Column="0"
                                             x:Name="_ringPasswordBoxAccountCreationCheck_"
                                             x:Uid="_ringPasswordBoxAccountCreationCheckUid_"
                                             Margin="0,0,10,0"
                                             PasswordChanged="_passwordBoxAccountCreationCheck__PasswordChanged" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_passwordCheckValid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Text="&#xE10B;"
                                           Visibility="Collapsed" />
                                <TextBlock Grid.Column="1"
                                           x:Name="_passwordCheckInvalid_"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;" />
                            </Grid>
                        </StackPanel>
                        <!--  SIP account.  -->
                        <StackPanel x:Name="_sipAccountCreationStack_"
                                    Padding="10"
                                    Visibility="Collapsed">
                            <StackPanel Margin="10,10,10,0" Orientation="Horizontal">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}" Text="&#xE717;" />
                                <TextBlock x:Uid="_accountsSIPParameters_" Margin="10" />
                            </StackPanel>
                            <TextBox x:Name="_sipHostnameTextBox_"
                                     x:Uid="_sipHostnameEditionUid_"
                                     Margin="20,10,20,10"
                                     IsSpellCheckEnabled="False" />
                            <TextBox x:Name="_sipUsernameTextBox_"
                                     x:Uid="_sipUsernameEditionTextBoxUid_"
                                     Margin="20,10,20,10"
                                     IsSpellCheckEnabled="False" />
                            <PasswordBox x:Name="_sipPasswordBoxAccountCreation_"
                                         x:Uid="_sipPasswordEditionUid_"
                                         Margin="20,10,20,10" />
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!--  buttons yes/no to create the new account.  -->
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Grid.Row="1"
                                x:Name="_createAccountYes_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_createAccountYes__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_create_account_yes_" />
                            </ToolTipService.ToolTip>
                        </Button>
                        <Button Grid.Row="1"
                                x:Name="_createAccountNo_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_createAccountNo__Click"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_account_cancel_" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>

            <!--  add account menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_accountAddMenuGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_accountsAddDevice_"
                           Margin="12,6,4,2"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <StackPanel Grid.Row="1"
                            Padding="10"
                            Background="{StaticResource RingBlueLightBrush}"
                            Orientation="Horizontal">
                    <Button x:Name="_step1button_"
                            Click="_step1button__Click"
                            Content="Step 1" />
                    <TextBlock Text="&gt;" />
                    <Button x:Name="_step2button_"
                            Click="_step2button__Click"
                            Content="Step 2" />
                </StackPanel>
                <!--  step 1.  -->
                <StackPanel Grid.Row="1"
                            x:Name="_step1Menu_"
                            Padding="20"
                            Background="{StaticResource RingBlueLightBrush}">
                    <TextBlock x:Uid="_accountsAddStep1_"
                               TextAlignment="Left"
                               TextWrapping="Wrap" />
                    <HyperlinkButton x:Uid="_accountsEditionLearnMore_"
                                     Margin="0,0,0,10"
                                     NavigateUri="http://ring.cx" />
                </StackPanel>
                <!--  step 2.  -->
                <StackPanel Grid.Row="1"
                            x:Name="_step2Menu_"
                            Background="{StaticResource RingBlueLightBrush}"
                            Visibility="Collapsed">
                    <TextBox x:Name="_PINTextBox_"
                             x:Uid="_accountsAddEnterPIN_"
                             Margin="20,10,20,10"
                             GotFocus="_PINTextBox__GotFocus"
                             IsSpellCheckEnabled="False"
                             KeyUp="_addAccountInputValidation__KeyUp" />
                    <PasswordBox x:Name="_ArchivePassword_"
                                 x:Uid="_accountsEnterArchivePassword_"
                                 Margin="20,10,20,10"
                                 KeyUp="_addAccountInputValidation__KeyUp" />
                    <TextBlock x:Name="_response_"
                               HorizontalAlignment="Center"
                               Foreground="Red"
                               Text="" />
                </StackPanel>
                <!--  buttons next step and yes/no to add the account.  -->
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <StackPanel Padding="10,0"
                                HorizontalAlignment="Center"
                                Orientation="Horizontal">
                        <Button x:Name="_nextstep_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_step2button__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle2}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_add_account_next_" />
                            </ToolTipService.ToolTip>
                        </Button>
                        <Button x:Name="_addAccountYes_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_addAccountYes__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}"
                                Visibility="Collapsed">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_add_account_yes_" />
                            </ToolTipService.ToolTip>
                        </Button>
                        <Button x:Name="_addAccountNo_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_addAccountNo__Click"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle5}"
                                Visibility="Collapsed">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_account_cancel_" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
            <!--  devices menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_devicesMenuGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Name="_devicesMenuTitle_"
                           x:Uid="_accountsDevices_"
                           Margin="12,6,4,2"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <!--  about this device  -->
                    <StackPanel Grid.Row="0"
                                Margin="10,20,10,10"
                                Orientation="Horizontal">
                        <TextBlock Margin="0,0,10,0"
                                   Style="{StaticResource TextSegoeStyle-20pt-black}"
                                   Text="&#xE211;" />
                        <TextBlock x:Uid="_thisDevice_" />
                    </StackPanel>

                    <!--  this device  -->
                    <Grid Grid.Row="1"
                          Padding="10"
                          HorizontalAlignment="Center"
                          Background="AliceBlue">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="52" />
                                <ColumnDefinition Width="180" />
                                <ColumnDefinition Width="42" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       x:Uid="_deviceName_"
                                       VerticalAlignment="Center"
                                       FontWeight="Bold"
                                       Text="Name " />
                            <TextBox Grid.Column="1"
                                     x:Name="_deviceName_"
                                     Width="180"
                                     Height="32"
                                     IsSpellCheckEnabled="False"
                                     KeyUp="_deviceName__KeyUp"
                                     LostFocus="_deviceName__LostFocus"
                                     MaxLength="16"
                                     Text="[TEXT_MISSING]"
                                     TextWrapping="NoWrap" />
                        </Grid>
                        <Grid Grid.Row="1" Margin="0,10,0,0">
                            <TextBlock x:Name="_deviceId_"
                                       VerticalAlignment="Center"
                                       FontSize="12"
                                       Text="[TEXT MISSING]"
                                       TextTrimming="CharacterEllipsis" />
                        </Grid>
                    </Grid>

                    <!--  other linked devices  -->
                    <StackPanel Grid.Row="2"
                                Margin="10,20"
                                Orientation="Horizontal">
                        <TextBlock Margin="0,0,10,0"
                                   Style="{StaticResource TextSegoeStyle-20pt-black}"
                                   Text="&#xE212;" />
                        <TextBlock x:Uid="_other_linked_devices_" />
                    </StackPanel>
                    <TextBlock Grid.Row="3"
                               x:Name="_waitingDevicesList_"
                               x:Uid="_waitingDevicesListUid_"
                               HorizontalAlignment="Center" />
                    <TextBlock Grid.Row="3"
                               x:Name="_noDevicesList_"
                               Margin="20,-10,0,0"
                               Foreground="OrangeRed"
                               Visibility="Collapsed" />
                    <ListBox Grid.Row="3"
                             x:Name="_devicesIdList_"
                             Padding="10,0"
                             Background="{StaticResource RingBlueLightBrush}"
                             ItemContainerStyle="{StaticResource otherdeviceListBoxStyle}"
                             ItemTemplate="{StaticResource RingDeviceItemsTemplate}"
                             Visibility="Collapsed" />
                </Grid>

                <!--  button to add device.  -->
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <Button x:Name="_addDevice_"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Click="_addDevice__Click"
                            Content="&#xE948;"
                            Style="{StaticResource ButtonStyle6}">
                        <ToolTipService.ToolTip>
                            <TextBlock x:Uid="_tt_add_device_" />
                        </ToolTipService.ToolTip>
                    </Button>
                </Grid>
            </Grid>

            <!--  add device (pin generator) menu.  -->
            <Grid Grid.Row="0"
                  x:Name="_addingDeviceGrid_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_addDeviceMenuTitle_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                               x:Uid="_accountsPINGenerator_"
                               Margin="10,10,0,10"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center" />
                    <PasswordBox Grid.Row="1"
                                 x:Name="_passwordForPinGenerator_"
                                 x:Uid="_accountsEnterArchivePassword_"
                                 Margin="10"
                                 KeyUp="_passwordForPinGenerator__KeyUp" />
                </Grid>
                <!--  buttons yes/no to generate a PIN.  -->
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Grid.Row="1"
                                x:Name="_pinGeneratorYes_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_pinGeneratorYes__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_pin_gen_yes_" />
                            </ToolTipService.ToolTip>
                        </Button>
                        <Button Grid.Row="1"
                                x:Name="_pinGeneratorNo_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_pinGeneratorNo__Click"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_pin_gen_no_" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
            <!--  waiting for a PIN.  -->
            <Grid Grid.Row="0"
                  x:Name="_waitingForPin_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Uid="_accountsAddDevice_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                               x:Name="_waitingAndResult_"
                               x:Uid="_accountsWaitingAndResult_"
                               Margin="10,10,0,10"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center" />
                </Grid>
                <Grid Grid.Row="2" Background="{StaticResource RingBlueMidBrush}">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Grid.Row="1"
                                x:Name="_closePin_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_closePin__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}">
                            <ToolTipService.ToolTip>
                                <TextBlock x:Uid="_tt_pin_gen_close_" />
                            </ToolTipService.ToolTip>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
            <!--  contacts + calls => smartpanelitems.  -->
            <Grid Grid.Row="0"
                  x:Name="_smartGrid_"
                  Background="{StaticResource RingBlueLightBrush}">
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="_contactsTitleRow_" Height="54" />
                    <RowDefinition x:Name="_rowRingTxtBx_" Height="48" />
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Name="_contactsTitle_"
                           x:Uid="_contactsTitle_"
                           Margin="12,6,4,2"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <Grid Grid.Row="1" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Border Grid.Column="0"
                            x:Name="BackgroundElement"
                            Grid.ColumnSpan="2"
                            Margin="12,4,12,4"
                            Background="White"
                            BorderBrush="LightGray"
                            BorderThickness="1"
                            Opacity="1" />
                    <TextBox Grid.Column="0"
                             x:Name="_ringTxtBx_"
                             x:Uid="_ringTxtBx_"
                             Margin="14,7,7,7"
                             Padding="7,6,7,7"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Center"
                             Background="White"
                             BorderThickness="0"
                             Foreground="Black"
                             IsSpellCheckEnabled="False"
                             KeyUp="_ringTxtBx__KeyUp"
                             TextWrapping="Wrap" />
                    <Button Grid.Column="1"
                            x:Name="_addButton_"
                            Width="38"
                            Margin="0,4,12,4"
                            Padding="4,5,6,2"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="_ringTxtBx__Click"
                            Content="&#xE71E;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="18"
                            Foreground="{StaticResource RingBlueMidBrush}"
                            IsTabStop="False"
                            Visibility="Visible">
                        <Button.RenderTransform>
                            <TranslateTransform X="0" />
                        </Button.RenderTransform>
                    </Button>
                </Grid>
                <ListBox Grid.Row="3"
                         x:Name="_smartList_"
                         MaxWidth="320"
                         Margin="0"
                         Padding="0"
                         Background="Transparent"
                         GotFocus="_smartList__GotFocus"
                         ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                         ItemTemplate="{StaticResource SmartPanelItemsTemplate}"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.HorizontalScrollMode="Disabled"
                         SelectionChanged="_smartList__SelectionChanged" />
            </Grid>
            <!--  trust requests  -->
            <Grid Grid.Row="0" x:Name="_incomingContactRequestGrid_">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="auto" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Name="_contactRequestsTitle_"
                           x:Uid="_contactRequestsTitle_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <ListBox Grid.Row="1"
                         x:Name="_incomingContactRequestList_"
                         MaxWidth="320"
                         Margin="0"
                         Padding="0"
                         Background="Transparent"
                         ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                         ItemTemplate="{StaticResource ContactRequestItemsTemplate}"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.HorizontalScrollMode="Disabled" />
            </Grid>
            <!--  settings.  -->
            <Grid Grid.Row="0"
                  x:Name="_settingsMenu_"
                  Background="{StaticResource RingBlueLightBrush}"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0"
                           x:Name="_settingsTitle_"
                           x:Uid="_settingsTitle_"
                           Margin="12,6,4,8"
                           Style="{StaticResource SubheaderTextBlockStyle}" />
                <ScrollViewer Grid.Row="1"
                              x:Name="_settingsScrollView_"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollMode="Enabled">
                    <!--  video settings  -->
                    <StackPanel Margin="4">
                        <TextBlock x:Uid="_settingsVideo_"
                                   Margin="8"
                                   Style="{StaticResource TitleTextBlockStyle}" />
                        <TextBlock x:Uid="_settingsVideoDevice_"
                                   Margin="10"
                                   Style="{StaticResource BaseTextBlockStyle}" />
                        <ComboBox x:Name="_videoDeviceComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoDeviceComboBox__SelectionChanged" />
                        <TextBlock x:Uid="_settingsVideoResolution_"
                                   Margin="10"
                                   Style="{StaticResource BaseTextBlockStyle}" />
                        <ComboBox x:Name="_videoResolutionComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoResolutionComboBox__SelectionChanged" />
                        <TextBlock x:Uid="_settingsVideoRate_"
                                   Margin="10"
                                   Style="{StaticResource BaseTextBlockStyle}" />
                        <ComboBox x:Name="_videoRateComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoRateComboBox__SelectionChanged" />
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</Page>
