<!-- **********************************************************************
* Copyright (C) 2016 by Savoir-faire Linux                                *
* Author: Jäger Nicolas<nicolas.jager@savoirfairelinux.com>               *
*                                                                         *
* This program is free software; you can redistribute it and/or modify    *
* it under the terms of the GNU General Public License as published by    *
* the Free Software Foundation; either version 3 of the License, or       *
* (at your option) any later version.                                     *
*                                                                         *
* This program is distributed in the hope that it will be useful,         *
* but WITHOUT ANY WARRANTY; without even the implied warranty of          *
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *
* GNU General Public License for more details.                            *
*                                                                         *
* You should have received a copy of the GNU General Public License       *
* along with this program.  If not, see <http://www.gnu.org/licenses/> .  *
***********************************************************************-->
<Page x:Class="RingClientUWP.Views.SmartPanel"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="using:RingClientUWP"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d">

    <Page.Resources>
        <!--  template for contacts.  -->
        <DataTemplate x:Key="ContactTemplate" x:DataType="local:Contact">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="60" />
                    <!--  use the height of _contactBar_ to make it visible or collapsed.  -->
                    <RowDefinition x:Name="_contactBar_" Height="0" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="*" MinWidth="200" />
                    </Grid.ColumnDefinitions>
                    <!--  visual notifications.  -->
                    <Border x:Name="_visualNotificationVideoChat_"
                            Style="{StaticResource BorderStyle1}"
                            Visibility="Collapsed">
                        <TextBlock Style="{StaticResource TextSegoeStyle1}" Text="&#xE8AA;" />
                        <Border.RenderTransform>
                            <TranslateTransform X="17" Y="-14" />
                        </Border.RenderTransform>
                    </Border>
                    <Border x:Name="_visualNotificationNewMessage_"
                            Style="{StaticResource BorderStyle2}"
                            Visibility="{x:Bind notificationNewMessage, Mode=OneWay}">
                        <TextBlock Style="{StaticResource TextStyle3}" Text="{x:Bind unreadMessages, Mode=OneWay}" />
                        <Border.RenderTransform>
                            <TranslateTransform X="-17" Y="-14" />
                        </Border.RenderTransform>
                    </Border>
                    <Image x:Name="_contactAvatar_"
                           Grid.Column="0"
                           Width="55"
                           Height="55"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Source="Assets\TESTS\contactAvatar.png" />
                    <!--  name of the contact.  -->
                    <TextBlock x:Name="_contactName_"
                               Grid.Column="1"
                               Text="{x:Bind name_}">
                        <TextBlock.RenderTransform>
                            <TranslateTransform X="8" Y="3" />
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </Grid>
                <!--  button bar for accept/reject or cancel call.  -->
                <!--  nb : dont use Visibility with the grid, use the height of the hosting row (_contactBar_).  -->
                <Grid Grid.Row="1"
                      Width="320"
                      HorizontalAlignment="Left"
                      Background="DarkGray">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button x:Name="_acceptIncomingCallBtn_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Content="&#xE10B;"
                                Style="{StaticResource ButtonStyle2}" />
                        <Button x:Name="_rejectIncomingCallBtn_"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle2}" />
                    </StackPanel>
                    <TextBlock x:Name="_contactCallStatus_"
                               HorizontalAlignment="Center"
                               Foreground="DarkGray"
                               Text="Incoming call">
                        <TextBlock.RenderTransform>
                            <TranslateTransform Y="-30" />
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </Grid>
            </Grid>
        </DataTemplate>
        <!--  template for accounts.  -->
        <DataTemplate x:Key="AccountTemplate" x:DataType="local:Account">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="260" />
                    <ColumnDefinition Width="60" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <TextBlock x:Name="_accountName_"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="10,5,10,0"
                           Text="{x:Bind name_}" />
                <TextBlock x:Name="_accountType_"
                           Grid.Row="0"
                           Grid.Column="1"
                           Margin="0,5,18,0"
                           Foreground="ForestGreen"
                           Text="{x:Bind accountType_}"
                           TextAlignment="Right" />
                <TextBlock x:Name="_ringID_"
                           Grid.Row="1"
                           Grid.Column="0"
                           Grid.ColumnSpan="2"
                           Margin="10,5,10,0"
                           FontSize="14"
                           Foreground="Crimson"
                           Text="{x:Bind ringID_}"
                           TextTrimming="CharacterEllipsis" />
            </Grid>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <!--  where accounts and share menu drop down are.  -->
            <RowDefinition Height="auto" />
            <!--  where contacts and settings are.  -->
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <!--  drop down menus.  -->
        <Grid Background="LightBlue">
            <Grid.RowDefinitions>
                <!--  where the selected account is shown.  -->
                <RowDefinition x:Name="_selectedAccountRow_" Height="90" />
                <!--  where the drop down menus are shown.  -->
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <!--  selected account.  -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="_selectedAccountAvatarColumn_" Width="90" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="50" />
                </Grid.ColumnDefinitions>
                <Ellipse x:Name="_selectedAccountAvatarContainer_"
                         Grid.Column="0"
                         Width="80"
                         Height="80"
                         Margin="5">
                    <Ellipse.Fill>
                        <ImageBrush x:Name="_selectedAccountAvatar_" ImageSource="Assets\TESTS\contactAvatar.png" />
                    </Ellipse.Fill>
                </Ellipse>
                <StackPanel Grid.Column="1" VerticalAlignment="Bottom">
                    <TextBlock x:Name="_selectedAccountName_"
                               Margin="10"
                               Style="{StaticResource TextStyle2}"
                               Text="default name" />
                    <StackPanel Orientation="Horizontal">
                        <!--  Content="&#xE0A1;  -->
                        <ToggleButton x:Name="_accountsMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Checked="_accountsMenuButton__Checked"
                                      Content="&#xE168;"
                                      Style="{StaticResource ToggleButtonStyle1}"
                                      Unchecked="_accountsMenuButton__Unchecked" />
                        <ToggleButton x:Name="_shareMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Checked="_shareMenuButton__Checked"
                                      Content="&#xE72D;"
                                      Style="{StaticResource ToggleButtonStyle1}"
                                      Unchecked="_shareMenuButton__Unchecked" />
                    </StackPanel>
                </StackPanel>
                <ToggleButton x:Name="_settingsTBtn_"
                              Grid.Column="2"
                              VerticalAlignment="Bottom"
                              Checked="_settings__Checked"
                              Content="&#xE115;"
                              Style="{StaticResource ToggleButtonStyle1}"
                              Unchecked="_settings__Unchecked" />
            </Grid>

            <!--
                sub menus like the accounts list or the share menu are just below, technicaly they are nested inside the
                same row. To sumon them we use the visibility of their own grid, by linking it to a toggle button
            -->

            <!--  accounts menu.  -->
            <Grid x:Name="_accountsMenuGrid_"
                  Grid.Row="1"
                  MaxHeight="350"
                  Background="LightBlue"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <ScrollViewer x:Name="_accountsListScrollView_"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollMode="Enabled">
                    <ListBox x:Name="_accountsList_"
                             Grid.Row="0"
                             Width="320"
                             Background="#FFE4F1F9"
                             ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                             ItemTemplate="{StaticResource AccountTemplate}"
                             SelectionChanged="_accountList__SelectionChanged" />
                </ScrollViewer>
                <Button x:Name="_addAccountBtn_"
                        Grid.Row="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Click="_addAccountBtn__Click"
                        Content="&#xE948;"
                        Style="{StaticResource ButtonStyle2}" />
            </Grid>
            <!--  account creation menu.  -->
            <Grid x:Name="_accountCreationMenuGrid_"
                  Grid.Row="2"
                  Background="LightBlue"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0"
                            Background="#FFE4F1F9"
                            Orientation="Vertical">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Margin="10,10,0,10"
                                   VerticalAlignment="Center"
                                   Text="Account type : " />
                        <ComboBox x:Name="_accountTypeComboBox_"
                                  Width="195"
                                  Margin="10"
                                  VerticalAlignment="Center"
                                  SelectedIndex="0">
                            <ComboBoxItem Content="Ring" />
                            <ComboBoxItem Content="Sip" />
                        </ComboBox>
                    </StackPanel>
                    <!--  RING account.  -->
                    <StackPanel x:Name="_ringAccountCreationStack_" Visibility="Visible">
                        <TextBox x:Name="_aliasTextBox_"
                                 Margin="10"
                                 PlaceholderText="Enter your username" />
                        <PasswordBox Margin="10" PlaceholderText="Enter your password" />
                        <PasswordBox Margin="10" PlaceholderText="Repeat your Password" />
                    </StackPanel>
                </StackPanel>
                <!--  buttons yes/no to create the new account.  -->
                <Grid Grid.Row="1">
                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button x:Name="_createAccountYes_"
                                Grid.Row="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_createAccountYes__Click"
                                Content="&#xE081;"
                                Style="{StaticResource ButtonStyle5}" />
                        <Button x:Name="_createAccountNo_"
                                Grid.Row="1"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Click="_createAccountNo__Click"
                                Content="&#xE106;"
                                Style="{StaticResource ButtonStyle5}" />
                    </StackPanel>
                </Grid>
            </Grid>
            <!--  share menu.  -->
            <Grid x:Name="_shareMenuGrid_"
                  Grid.Row="2"
                  Background="LightBlue"
                  Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <Grid Background="#FFE4F1F9">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <Image x:Name="_selectedAccountQrCode_"
                           Grid.Row="0"
                           Width="200"
                           Height="200"
                           Margin="5"
                           Source="Assets\TESTS\qrcode.png" />
                    <TextBlock Grid.Row="1"
                               HorizontalAlignment="Center"
                               Text="RingId:" />
                    <TextBox Grid.Row="2"
                             HorizontalAlignment="Center"
                             Style="{StaticResource TextBoxStyle2}"
                             Text="c4fc649aed8b2497a5e98fd2d856222f07020044" />
                </Grid>
            </Grid>
        </Grid>
        <!--  contact list and settings.  -->
        <Grid Grid.Row="1">
            <!--  contacts list.  -->
            <Grid x:Name="_smartGrid_" Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="_rowRingTxtBx_" Height="40" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBox x:Name="_ringTxtBx_"
                         Width="320"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         KeyDown="_ringTxtBx__KeyDown"
                         Style="{StaticResource TextBoxStyle1}"
                         Text=""
                         TextWrapping="Wrap" />
                <ListBox x:Name="_smartList_"
                         Grid.Row="1"
                         Margin="0"
                         ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                         ItemTemplate="{StaticResource ContactTemplate}"
                         Padding="0"
                         ScrollViewer.HorizontalScrollBarVisibility="Auto"
                         ScrollViewer.HorizontalScrollMode="Enabled"
                         SelectionChanged="_smartList__SelectionChanged" />
            </Grid>
            <!--  settings.  -->
            <Grid x:Name="_settings_"
                  Grid.Row="0"
                  Visibility="Collapsed">
                <TextBlock>some settings</TextBlock>
            </Grid>
        </Grid>
    </Grid>

</Page>
