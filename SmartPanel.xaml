<!-- **********************************************************************
* Copyright (C) 2016 by Savoir-faire Linux                                *
* Author: Jäger Nicolas<nicolas.jager@savoirfairelinux.com>               *
* Author: Traczyk Andreas<andreas.traczyk@savoirfairelinux.com>           *
*                                                                         *
* This program is free software; you can redistribute it and/or modify    *
* it under the terms of the GNU General Public License as published by    *
* the Free Software Foundation; either version 3 of the License, or       *
* (at your option) any later version.                                     *
*                                                                         *
* This program is distributed in the hope that it will be useful,         *
* but WITHOUT ANY WARRANTY; without even the implied warranty of          *
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the           *
* GNU General Public License for more details.                            *
*                                                                         *
* You should have received a copy of the GNU General Public License       *
* along with this program.  If not, see <http://www.gnu.org/licenses/> .  *
*********************************************************************** -->
<Page x:Class="RingClientUWP.Views.SmartPanel"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:RingClientUWP"
      xmlns:controls="using:RingClientUWP.Controls"
      xmlns:views="using:RingClientUWP.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      NavigationCacheMode="Enabled"
      mc:Ignorable="d">

    <Page.Resources>
        <!-- converters -->
        <views:NewMessageBubleNotification x:Key="_NewMessageBubleNotification_" />
        <views:IncomingVisibility x:Key="_IncomingVisibility_" />
        <views:OutGoingVisibility x:Key="_OutGoingVisibility_" />
        <views:HasAnActiveCall x:Key="_HasAnActiveCall_" />
        <views:AccountTypeToSourceImage x:Key="_AccountTypeToSourceImage_" />
        <views:AccountSelectedToVisibility x:Key="_AccountSelectedToVisibility_" />
        <views:CollapseEmptyString x:Key="_CollapseEmptyString_" />
        <views:ContactStatusNotification x:Key="_ContactStatusNotification_" />
        <views:boolToVisibility x:Key="_boolToVisibility_" />
        <views:uintToVisibility x:Key="_uintToVisibility_" />
        <views:OneToVisibility x:Key="_OneToVisibility_" />
        <views:PresenceStatus x:Key="_PresenceStatus_" />
        <views:MoreThanOneToVisibility x:Key="_MoreThanOneToVisibility_" />
        <views:UnreadAccountNotificationsString x:Key="_UnreadAccountNotificationsString_" />
        <views:PartialTrustToVisibility x:Key="_PartialTrustToVisibility_" />
        <views:TrustedToVisibility x:Key="_TrustedToVisibility_" />
        <views:SelectedAccountToVisibility x:Key="_SelectedAccountToVisibility_" />
        <views:CallStatusToSpinnerVisibility x:Key="_CallStatusToSpinnerVisibility_" />
        <views:CallStatusForIncomingCallAnimatedEllipse x:Key="_CallStatusForIncomingCallAnimatedEllipse_" />
        <views:CallStatusForIncomingCallStaticEllipse x:Key="_CallStatusForIncomingCallStaticEllipse_" />
        <views:AccountRegistrationStateToString x:Key="_AccountRegistrationStateToString_" />
        <views:AccountRegistrationStateToForeground x:Key="_AccountRegistrationStateToForeground_" />
        <views:CachedImageConverter x:Key="_CachedImageConverter_" />
        <views:ContactAccountTypeToVisibility x:Key="_ContactAccountTypeToVisibility_" />
        <views:ContactConferenceableToVisibility x:Key="_ContactConferenceableToVisibility_" />

        <!-- template for AccountListItems. -->
        <DataTemplate x:Key="AccountListItemsTemplate"
                      x:DataType="controls:AccountListItem">
            <Grid Margin="0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="280"/>
                </Grid.ColumnDefinitions>
                <Border Grid.Column="0"
                        Margin="5,0"
                        Style="{StaticResource BorderStyle3}">
                    <Image x:Name="_AccountTypeIcon_"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Source="{x:Bind  _account.accountType_, Converter={StaticResource _AccountTypeToSourceImage_}, Mode=OneWay}"/>
                </Border>
                <Button x:Name="_editAccountMenuButton_"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Content="&#xE104;"
                        FontFamily="Segoe MDL2 Assets"
                        Click="_editAccountMenuButton__Click"
                        FontSize="20"
                        Foreground="White"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="0,4,0,2"
                        Margin="0,0,12,0"
                        Width="28"
                        Visibility="{x:Bind _isSelected, Converter={StaticResource _AccountSelectedToVisibility_}, Mode=OneWay}"
                        Grid.Column="1">
                    <Button.RenderTransform>
                        <TranslateTransform Y="-10"/>
                    </Button.RenderTransform>
                </Button>
                <StackPanel Orientation="Vertical"
                            Grid.Column="1">
                    <TextBlock x:Name="_accountName_"
                           Style="{StaticResource TextStyle5}"
                           Text="{x:Bind  _account._bestName2, Mode=OneWay}"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock  x:Name="_ringID_"
                                    Grid.Column="0"
                                    Width="180"
                                    Style="{StaticResource TextStyle6}"
                                    Visibility="{x:Bind _account.ringID_, Converter={StaticResource _CollapseEmptyString_}, Mode=OneWay}"
                                    Text="{x:Bind  _account.ringID_, Mode=OneWay}"
                                    TextTrimming="CharacterEllipsis"/>
                        <TextBlock  x:Name="_registrationState_"
                                    Grid.Column="1"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    Foreground="{x:Bind _account, Converter={StaticResource _AccountRegistrationStateToForeground_}, Mode=OneWay}"
                                    Text="{x:Bind _account, Converter={StaticResource _AccountRegistrationStateToString_}, Mode=OneWay}"/>
                    </Grid>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="_unreadAccountNotifications_"
                               Grid.ColumnSpan="2"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="OrangeRed"
                               Text="{x:Bind _account, Converter={StaticResource _UnreadAccountNotificationsString_}, Mode=OneWay}"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </DataTemplate>
        <!-- template for smartpanelitems. -->
        <DataTemplate x:Key="SmartPanelItemsTemplate"
                      x:DataType="controls:SmartPanelItem">
            <StackPanel>
                <StackPanel >
                    <Grid   Tapped="SmartPanelItem_Grid_PointerReleased"
                            PointerEntered="SmartPanelItem_Grid_PointerEntered"
                            PointerExited="SmartPanelItem_Grid_PointerExited"
                            PointerMoved="SmartPanelItem_Grid_PointerMoved"
                            RightTapped="SmartPanelItem_Grid_RightTapped"
                            DoubleTapped="SmartPanelItem_Grid_DoubleTapped"
                            Visibility="{x:Bind _isVisible, Mode=OneWay}">
                        <FlyoutBase.AttachedFlyout>
                            <MenuFlyout x:Name="_SPI_MenuFlyout_"
                                        LightDismissOverlayMode="Off"
                                        Placement="Bottom">
                                <MenuFlyoutItem x:Name="_videoCall_MenuFlyoutItem_"
                                                Text="Call"
                                                Tapped="_videocall_MenuFlyoutItem_Tapped"/>
                                <MenuFlyoutItem x:Name="_addToConference_MenuFlyoutItem_"
                                                Text="Add to conference"
                                                Tapped="_addToConference_MenuFlyoutItem__Tapped"
                                                Visibility="{x:Bind _contact, Converter={StaticResource _ContactConferenceableToVisibility_}, Mode=OneWay}"/>
                                <MenuFlyoutItem x:Name="_copyRingID_MenuFlyoutItem_"
                                                Text="Copy RingID"
                                                Tapped="_copyRingID_MenuFlyoutItem__Tapped"
                                                Visibility="{x:Bind _contact, Converter={StaticResource _ContactAccountTypeToVisibility_}, ConverterParameter=RING, Mode=OneWay}"/>
                            </MenuFlyout>
                        </FlyoutBase.AttachedFlyout>
                        <Grid.RowDefinitions>
                            <!-- row definition for the contact. -->
                            <RowDefinition Height="auto"/>
                            <!-- row definition for the incoming call bar. -->
                            <RowDefinition Height="auto"/>
                        </Grid.RowDefinitions>
                        <!-- the first rectangle helps to detect mouse overing-->
                        <Rectangle Fill="Transparent"
                           Width="320"
                           Grid.Row="0"/>
                        <!-- curtain over item with contact not ready (e.g. lookup is in progress) -->
                        <Rectangle  Fill="White"
                                    Width="320"
                                    Grid.Row="0"
                                    Canvas.ZIndex="2"
                                    Opacity="0.6"
                                    IsHitTestVisible="False"
                                    Visibility="{x:Bind _contact._contactStatus, Converter={StaticResource _ContactStatusNotification_}, Mode=OneWay}"/>
                        <!-- contact. -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="320"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="60"/>
                                <!-- use the height of _contactBar_ to make it visible or collapsed. -->
                                <RowDefinition x:Name="_contactBar_"
                                       Height="{x:Bind _contact._contactBarHeight, Mode=OneWay}"/>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="60"/>
                                    <ColumnDefinition Width="*"
                                              MinWidth="200"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <!-- so far, I haven't fond any way to make a nested animation, inside a datatemplate, starting with the begin method from the code.
                                    I use a black magic workaround with two ellipses... -->
                                    <Ellipse    x:Name="_incomingCallAnimatedEllipse_"
                                                Height="50"
                                                Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallAnimatedEllipse_}, Mode=OneWay}"
                                                Width="50"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                Margin="5">
                                        <Ellipse.Fill>
                                            <ImageBrush x:Name="_contactAvatar2_"
                                                        ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}"/>
                                        </Ellipse.Fill>
                                        <Ellipse.Triggers>
                                            <EventTrigger>
                                                <BeginStoryboard>
                                                    <Storyboard x:Name="_toto_">
                                                        <DoubleAnimation Storyboard.TargetName="_incomingCallAnimatedEllipse_"
                                                             Storyboard.TargetProperty="Opacity"
                                                             From="1"
                                                             AutoReverse="True"
                                                             RepeatBehavior="Forever"
                                                             To="0"
                                                             Duration="0:0:1"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </Ellipse.Triggers>
                                    </Ellipse>
                                    <StackPanel>
                                        <Grid>
                                            <Ellipse    Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusForIncomingCallStaticEllipse_}, Mode=OneWay}"
                                                Height="50"
                                                Width="50"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                Margin="5"
                                                Canvas.ZIndex="0">
                                                <Ellipse.Fill>
                                                    <ImageBrush x:Name="_contactAvatar_"
                                                                ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}"/>
                                                </Ellipse.Fill>
                                            </Ellipse>
                                        </Grid>
                                        <Grid>
                                            <Ellipse    x:Name="_presenceNotificationCircle_"
                                                Visibility="Visible"
                                                IsHitTestVisible="False"
                                                Fill="{x:Bind _contact._presenceStatus, Converter={StaticResource _PresenceStatus_}, Mode=OneWay}"
                                                Height="14"
                                                Width="14"
                                                StrokeThickness="1.5"
                                                Stroke="{x:Bind _contact._presenceStatus, Converter={StaticResource _PresenceStatus_}, ConverterParameter=Border, Mode=OneWay}">
                                                <Ellipse.RenderTransform>
                                                    <TranslateTransform X="16" Y="-21"/>
                                                </Ellipse.RenderTransform>
                                            </Ellipse>
                                        </Grid>
                                    </StackPanel>
                                    <Border x:Name="_visualNotificationNewMessage_"
                                            Visibility="{x:Bind _contact._unreadMessages, Converter={StaticResource _NewMessageBubleNotification_}, Mode=OneWay}"
                                            Style="{StaticResource BorderStyle2}">
                                        <TextBlock  Text="{x:Bind _contact._unreadMessages, Mode=OneWay}"
                                                    Style="{StaticResource TextStyle3}"/>
                                        <Border.RenderTransform>
                                            <TranslateTransform X="-17" Y="-58"/>
                                        </Border.RenderTransform>
                                    </Border>
                                </StackPanel>

                                <Grid Grid.Column="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="60"/>
                                        <RowDefinition Height="30"/>
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0"
                                                Padding="0,4,0,0">
                                        <!-- name of the contact. -->
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="180"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock  x:Name="_contactName_"
                                                        Grid.Column="0"
                                                        Text="{x:Bind _contact._bestName, Mode=OneWay}"
                                                        TextTrimming="CharacterEllipsis"
                                                        MaxWidth="180">
                                            </TextBlock>
                                            <StackPanel Orientation="Horizontal"
                                                        Grid.Column="1">
                                                <ProgressBar    Foreground="#333333"
                                                                HorizontalAlignment="Right"
                                                                Width="80"
                                                                Visibility="{x:Bind _callStatus, Converter={StaticResource _CallStatusToSpinnerVisibility_}, Mode=OneWay}"
                                                                IsIndeterminate="True"
                                                                Padding="4,0,4,0"/>
                                                <ProgressBar    Foreground="#333333"
                                                                Canvas.ZIndex="3"
                                                                HorizontalAlignment="Right"
                                                                Width="80"
                                                                Visibility="{x:Bind _contact._contactStatus, Converter={StaticResource _ContactStatusNotification_}, Mode=OneWay}"
                                                                IsIndeterminate="True"
                                                                Padding="4,0,4,0"/>
                                            </StackPanel>
                                        </Grid>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock  x:Name="_contactLastTime_"
                                                        FontStyle="Italic"
                                                        Foreground="#FF333333"
                                                        MaxWidth="180"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontSize="10"
                                                        Text="{x:Bind _contact._lastTime, Mode=OneWay}"/>
                                        </StackPanel>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock  x:Uid="_contactRequestSent_"
                                                        Visibility="{x:Bind _contact, Converter={StaticResource _PartialTrustToVisibility_}, Mode=OneWay}"
                                                        Grid.Column="0"
                                                        FontStyle="Italic"
                                                        Foreground="#FF339933"
                                                        MaxWidth="200"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontSize="12"/>
                                            <!-- call action buttons. -->
                                            <Grid x:Name="_callActionButtonGrid_"
                                                  Grid.Column="1"
                                                  HorizontalAlignment="Right"
                                                  Margin="5,5,7,5">
                                                <Grid.RenderTransform>
                                                    <TranslateTransform X="0" Y="-12"/>
                                                </Grid.RenderTransform>
                                                <Button Grid.Row="0"
                                                        Visibility="{x:Bind _isCallable, Converter={StaticResource _boolToVisibility_}, Mode=OneWay}"
                                                        GotFocus="_callContact__Click"
                                                        VerticalAlignment="Bottom"
                                                        HorizontalAlignment="Left"
                                                        Style="{StaticResource ButtonStyleForCallBar}"
                                                        FontFamily="Segoe MDL2 Assets"
                                                        Content="&#xE116;"/>
                                                <StackPanel Orientation="Horizontal"
                                                            Visibility="Visible"
                                                            Grid.Row="0"
                                                            VerticalAlignment="Bottom"
                                                            HorizontalAlignment="Right">
                                                    <Button x:Name="_acceptIncomingCallBtn_"
                                                            GotFocus="_acceptIncomingCallBtn__Click"
                                                            Visibility="{x:Bind _callStatus, Converter={StaticResource _IncomingVisibility_}, Mode=OneWay}"
                                                            VerticalAlignment="Bottom"
                                                            HorizontalAlignment="Center"
                                                            Style="{StaticResource ButtonStyleForCallBar}"
                                                            FontFamily="Segoe MDL2 Assets"
                                                            Content="&#xE10B;"/>
                                                    <Button x:Name="_rejectIncomingCallBtn_"
                                                            GotFocus="_rejectIncomingCallBtn__Click"
                                                            Visibility="{x:Bind _callStatus, Converter={StaticResource _IncomingVisibility_}, Mode=OneWay}"
                                                            VerticalAlignment="Bottom"
                                                            HorizontalAlignment="Center"
                                                            Style="{StaticResource ButtonStyleForCallBar}"
                                                            FontFamily="Segoe MDL2 Assets"
                                                            Content="&#xE10A;"/>
                                                </StackPanel>
                                                <Button x:Name="_cancelCallBtn_"
                                                        GotFocus="_cancelCallBtn__Click"
                                                        Visibility="{x:Bind _callStatus, Converter={StaticResource _OutGoingVisibility_}, Mode=OneWay}"
                                                        VerticalAlignment="Bottom"
                                                        HorizontalAlignment="Right"
                                                        Style="{StaticResource ButtonStyleForCallBar}"
                                                        FontFamily="Segoe MDL2 Assets"
                                                        Content="&#xE10A;"/>
                                            </Grid>
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </DataTemplate>

        <!-- template for ContactRequestItems. -->
        <DataTemplate x:Key="ContactRequestItemsTemplate"
                      x:DataType="controls:ContactRequestItem">
            <!--<StackPanel Visibility="{x:Bind _contact, Converter={StaticResource _SelectedAccountToVisibility_}, Mode=OneWay}">-->
            <StackPanel>
                <Grid   PointerReleased="ContactRequestItem_Grid_PointerReleased"
                        PointerEntered="ContactRequestItem_Grid_PointerEntered"
                        PointerExited="ContactRequestItem_Grid_PointerExited"
                        PointerMoved="ContactRequestItem_Grid_PointerMoved"
                        Visibility="{x:Bind _isVisible, Mode=OneWay}">
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="320"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60"/>
                            <!-- use the height of _contactBar_ to make it visible or collapsed. -->
                            <RowDefinition x:Name="_contactBar_"
                                       Height="{x:Bind _contact._contactBarHeight, Mode=OneWay}"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition   Width="60"/>
                                <ColumnDefinition   Width="*"
                                                    MinWidth="200"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <Ellipse    Height="50"
                                            Width="50"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center"
                                            Margin="5">
                                    <Ellipse.Fill>
                                        <ImageBrush  x:Name="_contactAvatar_"
                                            ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}"
/>
                                    </Ellipse.Fill>
                                </Ellipse>
                            </StackPanel>
                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60"/>
                                    <RowDefinition Height="30"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0"
                                            Orientation="Vertical"
                                            Margin="0,6,0,0">
                                    <!-- name of the contact. -->
                                    <TextBlock  x:Name="_contactName_"
                                                Text="{x:Bind _contact._name, Mode=OneWay}"
                                                TextTrimming="CharacterEllipsis"
                                                MaxWidth="240"
                                                FontSize="14"
                                                HorizontalAlignment="Left"/>
                                    <TextBlock  x:Uid="_contactRequestPending_"
                                                FontStyle="Italic"
                                                Foreground="#FF339933"
                                                MaxWidth="200"
                                                TextTrimming="CharacterEllipsis"
                                                FontSize="12"
                                                HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal"
                                            Visibility="Visible"
                                            Grid.Row="0"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Right"
                                            Margin="0,0,6,6">
                                    <Button x:Name="_acceptContactRequestBtn_"
                                            Click="_acceptContactRequestBtn__Click"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Center"
                                            Style="{StaticResource ButtonStyleForCallBar}"
                                            FontFamily="Segoe MDL2 Assets"
                                            Content="&#xE10B;"/>
                                    <Button x:Name="_rejectContactRequestBtn_"
                                            Click="_rejectContactRequestBtn__Click"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Center"
                                            Style="{StaticResource ButtonStyleForCallBar}"
                                            FontFamily="Segoe MDL2 Assets"
                                            Content="&#xE10A;"/>
                                    <Button x:Name="_blockContactBtn_"
                                            Click="_blockContactBtn__Click"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Center"
                                            Style="{StaticResource ButtonStyleForCallBar}"
                                            FontFamily="Segoe MDL2 Assets"
                                            Content="&#xE8F8;"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </StackPanel>
        </DataTemplate>
        <!-- template for BannedContactTemplate. -->
        <DataTemplate x:Key="BannedContactTemplate"
                      x:DataType="controls:SmartPanelItem">
            <StackPanel>
                <Grid Visibility="{x:Bind _isVisible, Mode=OneWay}"
                      Background="Orange">
                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="260"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60"/>
                            <!-- use the height of _contactBar_ to make it visible or collapsed. -->
                            <RowDefinition x:Name="_contactBar_"
                                       Height="{x:Bind _contact._contactBarHeight, Mode=OneWay}"/>
                        </Grid.RowDefinitions>
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition   Width="60"/>
                                <ColumnDefinition   Width="*"
                                                    MinWidth="200"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <Ellipse    Height="50"
                                            Width="50"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center"
                                            Margin="5">
                                    <Ellipse.Fill>
                                        <ImageBrush  x:Name="_contactAvatar_"
                                                ImageSource="{x:Bind _contact._avatarImage, Mode=OneWay}"/>
                                    </Ellipse.Fill>
                                </Ellipse>
                            </StackPanel>
                            <Grid Grid.Column="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60"/>
                                    <RowDefinition Height="30"/>
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0"
                                            Orientation="Vertical"
                                            Margin="0,6,0,0">
                                    <!-- name of the contact. -->
                                    <TextBlock  x:Name="_contactName_"
                                                Text="{x:Bind _contact._name, Mode=OneWay}"
                                                TextTrimming="CharacterEllipsis"
                                                MaxWidth="180"
                                                FontSize="14"
                                                HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal"
                                            Visibility="Visible"
                                            Grid.Row="0"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Right"
                                            Margin="0,0,6,6">
                                    <Button x:Name="_addBannedContactBtn_"
                                            Click="_addBannedContactBtn__Click"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Center"
                                            Style="{StaticResource ButtonStyleForCallBar}"
                                            FontFamily="Segoe MDL2 Assets"
                                            Content="&#xE8FA;"/>
                                </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <!-- connectivity notification. -->
            <RowDefinition  x:Name="_networkConnectivityNotificationRow_"
                            Height="32"/>
            <!-- where accounts and share menu drop down are. -->
            <RowDefinition Height="auto"/>
            <!-- where contacts and settings are. -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0"
              Background="Red">
            <TextBlock Text="Network unavailable"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       FontSize="12">
            </TextBlock>
        </Grid>
        <!-- drop down menus. -->
        <Grid Grid.Row="1"
              Background="#3bc1d3">
            <Grid.RowDefinitions>
                <!-- where the selected account is shown. -->
                <RowDefinition x:Name="_selectedAccountRow_"
                               Height="60"/>
                <!-- where the drop down menus are shown. -->
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <!-- selected account. -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="_selectedAccountAvatarColumn_"
                                      Width="60"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Ellipse
                    x:Name="_selectedAccountAvatarContainer_"
                    Height="50"
                    Width="50"
                    Grid.Column="0"
                    Stroke="White"
                    StrokeThickness="3"
                    PointerEntered="_selectedAccountAvatarContainer__PointerEntered"
                    PointerExited="_selectedAccountAvatarContainer__PointerExited"
                    PointerReleased="_selectedAccountAvatarContainer__PointerReleased"
                    Margin="5">
                    <Ellipse.Fill>
                        <ImageBrush
                            x:Name="_selectedAccountAvatar_"
                            ImageSource="Assets\TESTS\contactAvatar.png"/>
                    </Ellipse.Fill>
                </Ellipse>
                <Ellipse
                    x:Name="_shaderPhotoboothIcon_"
                    Visibility="Collapsed"
                    Height="50"
                    Width="50"
                    Grid.Column="0"
                    IsHitTestVisible="False"
                    Fill="Black"
                    Opacity="0.3"
                    Margin="5">
                </Ellipse>
                <TextBlock x:Name="_photoboothIcon_"
                           Grid.Column="0"
                           Visibility="Collapsed"
                           IsHitTestVisible="False"
                           Style="{StaticResource TextSegoeStyle-Centered-40pt-white}"
                           Text="&#xE722;">
                </TextBlock>
                <StackPanel Grid.Column="1"
                            VerticalAlignment="Bottom">
                    <TextBlock x:Name="_selectedAccountName_"
                               Text="[TEXT MISSING]"
                               Margin="0,10,10,3"
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"
                               Style="{StaticResource TextStyle2}"/>
                    <StackPanel Orientation="Horizontal">
                        <!-- contacts list -->
                        <Grid>
                            <ToggleButton x:Name="_contactsListMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Content="&#xe716;"
                                      Click="_contactsListMenuButton__Click"
                                      Style="{StaticResource ToggleButtonStyle2}"/>
                            <Ellipse x:Name="_unreadMessagesCircle_"
                                     Visibility="Collapsed"
                                    IsHitTestVisible="False"
                                    Fill="OrangeRed"
                                    Height="8"
                                    Width="8"
                                    StrokeThickness="1"
                                    Stroke="OrangeRed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="12" Y="-8"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadMessagesAnimation_">
                                                <DoubleAnimation Storyboard.TargetName="_unreadMessagesCircle_"
                                                             Storyboard.TargetProperty="Opacity"
                                                             From="1.0"
                                                             AutoReverse="True"
                                                             RepeatBehavior="Forever"
                                                             To="0.4"
                                                             Duration="0:0:1"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!-- contact request list -->
                        <Grid>
                            <ToggleButton x:Name="_contactRequestListMenuButton_"
                                          VerticalAlignment="Bottom"
                                          Content="&#xe8fa;"
                                          Click="_contactRequestListMenuButton__Click"
                                          Style="{StaticResource ToggleButtonStyle2}">
                            </ToggleButton>
                            <Ellipse x:Name="_unreadContactRequestsCircle_"
                                     Visibility="Collapsed"
                                    IsHitTestVisible="False"
                                    Fill="OrangeRed"
                                    Height="8"
                                    Width="8"
                                    StrokeThickness="1"
                                    Stroke="OrangeRed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="12" Y="-8"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadContactRequestsAnimation_">
                                                <DoubleAnimation Storyboard.TargetName="_unreadContactRequestsCircle_"
                                                             Storyboard.TargetProperty="Opacity"
                                                             From="1.0"
                                                             AutoReverse="True"
                                                             RepeatBehavior="Forever"
                                                             To="0.4"
                                                             Duration="0:0:1"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!-- account menu -->
                        <Grid>
                            <ToggleButton x:Name="_accountsMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Click="_accountsMenuButton__Click"
                                      Content="&#xE168;"
                                      Style="{StaticResource ToggleButtonStyle2}">
                            </ToggleButton>
                            <Ellipse x:Name="_unreadAccountNotificationsCircle_"
                                     Visibility="Collapsed"
                                    IsHitTestVisible="False"
                                    Fill="OrangeRed"
                                    Height="8"
                                    Width="8"
                                    StrokeThickness="1"
                                    Stroke="OrangeRed">
                                <Ellipse.RenderTransform>
                                    <TranslateTransform X="12" Y="-8"/>
                                </Ellipse.RenderTransform>
                                <Ellipse.Triggers>
                                    <EventTrigger>
                                        <BeginStoryboard>
                                            <Storyboard x:Name="_unreadAccountMessagesAnimation_">
                                                <DoubleAnimation Storyboard.TargetName="_unreadAccountNotificationsCircle_"
                                                             Storyboard.TargetProperty="Opacity"
                                                             From="1.0"
                                                             AutoReverse="True"
                                                             RepeatBehavior="Forever"
                                                             To="0.4"
                                                             Duration="0:0:1"/>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                        </Grid>
                        <!-- _shareMenuButton_ -->
                        <ToggleButton x:Name="_shareMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Click="_shareMenuButton__Click"
                                      Style="{StaticResource ToggleButtonStyle2}">
                            <StackPanel>
                                <Image x:Name="_qrCodeIconWhite_"
                                       Source="Assets/qrCodeIconWhite.png"
                                       Visibility="Visible"
                                       Stretch="None"/>
                                <Image x:Name="_qrCodeIconBlack_"
                                       Visibility="Collapsed"
                                       Source="Assets/qrCodeIconBlack.png"
                                       Stretch="None"/>
                            </StackPanel>
                        </ToggleButton>
                        <!-- _devicesMenuButton_ -->
                        <ToggleButton x:Name="_devicesMenuButton_"
                                      VerticalAlignment="Bottom"
                                      Click="_devicesMenuButton__Click"
                                      Content="&#xE836;"
                                      Style="{StaticResource ToggleButtonStyle2}"/>
                        <!-- _settingsMenuButton_ -->
                        <ToggleButton x:Name="_settingsMenuButton_"
                                      Click="_settingsMenuButton__Click"
                                      VerticalAlignment="Bottom"
                                      Content="&#xE115;"
                                      Style="{StaticResource ToggleButtonStyle2}"/>
                        <!-- _homeButton_ -->
                        <Button x:Name="_homeButton_"
                                VerticalAlignment="Bottom"
                                Click="_homeButton__Click"
                                Content="&#xE80F;"
                                Style="{StaticResource ButtonStyleHome}"/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!--sub menus like the accounts list or the share menu are just below, technicaly they are nested inside the
            same row. To summon them we use the visibility of their own grid, by linking it to a toggle button-->

        </Grid>

        <!-- smartList and settings. -->
        <Grid Grid.Row="2"
              Background="#FFE4F1F9">
            <!-- accounts menu. -->
            <Grid x:Name="_accountsMenuGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#FFE4F1F9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                                Fill="LightBlue"
                                Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountsTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <ScrollViewer x:Name="_accountsListScrollView_"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollMode="Enabled"
                              Grid.Row="1">
                    <ListBox x:Name="_accountsList_"
                         SelectionChanged="_accountList__SelectionChanged"
                         Width="320"
                         ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                         Background="#FFE4F1F9"
                         ItemTemplate="{StaticResource AccountListItemsTemplate}"/>
                </ScrollViewer>
                <StackPanel Orientation="Horizontal"
                            Grid.Row="2"
                            Background="#3bc1d3">
                    <Button x:Name="_addAccountBtn_"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Content="&#xE948;"
                            Click="_addAccountBtn__Click"
                            Style="{StaticResource ButtonStyle5}"/>
                    <Button x:Name="_linkThisDeviceBtn_"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Content="&#xEBD2;"
                            Click="_linkThisDeviceBtn__Click"
                            Style="{StaticResource ButtonStyle5}"/>
                </StackPanel>
            </Grid>
            <!-- account edition menu. -->
            <Grid x:Name="_accountEditionGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#ffe4f1f9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountEditionTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <ScrollViewer x:Name="_scrollViewerEditionMenu_"
                              Grid.Row="1">
                    <StackPanel Orientation="Vertical"
                                Padding="0,0"
                                Background="#FFE4F1F9">
                        <!-- alias sub menu. -->
                        <StackPanel Orientation="Horizontal"
                                    Margin="10,20,0,10"
                                    Padding="10,0">
                            <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Margin="0,0,10,0"
                                       Text="&#xE8EC;"/>
                            <TextBlock x:Uid="_accountsAlias_"
                                       Text=""/>
                        </StackPanel>
                        <Grid Margin="10,0,10,10"
                              Padding="10,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="25"/>
                            </Grid.ColumnDefinitions>
                            <TextBox  x:Name="_accountAliasTextBoxEdition_"
                                      Grid.Column="0"
                                      TextChanged="_accountAliasTextBoxEdition__TextChanged"
                                      PlaceholderText="Enter alias"/>
                            <TextBlock x:Name="_accountAliasValidEdition_"
                                               Grid.Column="1"
                                               Padding="10,0"
                                               Style="{StaticResource TextSegoeStyle-20pt-green}"
                                               Visibility="Collapsed"
                                               Text="&#xE10B;"/>
                            <TextBlock x:Name="_accountAliasInvalidEdition_"
                                               Grid.Column="1"
                                               Padding="10,0"
                                               Style="{StaticResource TextSegoeStyle-20pt-red}"
                                               Text="&#xE10A;"/>
                        </Grid>
                        <!-- edition sub menu. -->
                        <StackPanel x:Name="_ringStackEdition_"
                                    Padding="10,0">
                            <!-- register account on blockachain -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="10,20,0,10">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Margin="0,0,10,0"
                                           Text="&#xE167;"/>
                                <TextBlock  x:Uid="_accountsRegisterPublicName_"/>
                            </StackPanel>
                            <ToggleSwitch x:Name="_RegisterStateEdition_"
                                      IsOn="True"
                                      Toggled="_RegisterStateEdition__Toggled"
                                      Margin="10"/>
                            <TextBlock x:Uid="_whatWillHappenEditionUid_"
                                       x:Name="_whatWillHappenEdition_"
                                       Margin="10,10,0,0"
                                       Style="{StaticResource BodyTextBlockStyle}"/>
                            <HyperlinkButton x:Uid="_accountsEditionLearnMore_"
                                             Margin="10,0,0,10"
                                             NavigateUri="http://ring.cx"/>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="25"/>
                                </Grid.ColumnDefinitions>
                                <TextBox    x:Uid="_usernameTextBoxEditionUid_"
                                            x:Name="_usernameTextBoxEdition_"
                                            Grid.Column="0"
                                            KeyUp="_usernameTextBoxEdition__KeyUp"/>
                                <TextBlock x:Name="_usernameValidEdition_"
                                                   Grid.Column="1"
                                                   Padding="10,0"
                                                   Style="{StaticResource TextSegoeStyle-20pt-green}"
                                                   Visibility="Collapsed"
                                                   Text="&#xE10B;"/>
                                <TextBlock x:Name="_usernameInvalidEdition_"
                                                   Grid.Column="1"
                                                   Padding="10,0"
                                                   Style="{StaticResource TextSegoeStyle-20pt-red}"
                                                   Text="&#xE10A;"/>
                            </Grid>
                            <Button x:Uid="_registerOnBlockchainEditionUid_"
                                    x:Name="_registerOnBlockchainEdition_"
                                    Visibility="Collapsed"
                                    Click="_registerOnBlockchainEdition__Click"/>
                            <!-- enabled -->
                            <StackPanel Orientation="Horizontal" Margin="10">
                                <TextBlock  Style="{StaticResource TextSegoeStyle-20pt-black}"
                                            Text="&#xED5C;"/>
                                <TextBlock  x:Uid="_accountsEnabled_"
                                            Margin="10"/>
                            </StackPanel>
                            <ToggleSwitch   x:Name="_enabledState_"
                                            Margin="20,10"/>
                            <!-- upnp state -->
                            <StackPanel Orientation="Horizontal" Margin="10">
                                <TextBlock  Style="{StaticResource TextSegoeStyle-20pt-black}"
                                            Text="&#xE15E;"/>
                                <TextBlock  x:Uid="_accountsUPnP_"
                                            Margin="10"/>
                            </StackPanel>
                            <ToggleSwitch   x:Name="_upnpState_"
                                            Margin="20,10"/>
                        </StackPanel>
                        <!-- SIP parameters. -->
                        <StackPanel x:Name="_sipAccountStackEdition_"
                                    Visibility="Collapsed"
                                    Padding="10,0">
                            <StackPanel Orientation="Horizontal"
                                    Margin="10">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Text="&#xE717;"/>
                                <TextBlock Text="SIP account parameters"
                                       Margin="10"/>
                            </StackPanel>
                            <TextBox
                                x:Uid="_sipHostnameEditionUid_"
                                x:Name="_sipHostnameEdition_"
                                Margin="10"/>
                            <TextBox
                                x:Uid="_sipUsernameEditionTextBoxUid_"
                                x:Name="_sipUsernameEditionTextBox_"
                                Margin="10"/>
                            <PasswordBox
                                x:Uid="_sipPasswordEditionUid_"
                                x:Name="_sipPasswordEdition_"
                                Margin="10"/>
                        </StackPanel>
                        <!-- delete account sub menu. -->
                        <StackPanel Orientation="Horizontal"
                                    Margin="10"
                                    Padding="10,0">
                            <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                   Text="&#xE74D;"/>
                            <TextBlock Text="Delete account" Margin="10"/>
                        </StackPanel>
                        <ToggleSwitch x:Name="_deleteAccountEdition_"
                                      Toggled="_deleteAccountEdition__Toggled"
                                      Margin="20,10"/>
                        <TextBlock
                            x:Uid="_whatWillHappendeleteRingAccountEditionUid_"
                            x:Name="_whatWillHappendeleteRingAccountEdition_"
                            Margin="0,10,0,0"
                            Padding="10,0"
                            Style="{StaticResource BodyTextBlockStyle}"
                            Foreground="Red"
                            Visibility="Collapsed"/>
                        <TextBlock
                            x:Uid="_whatWillHappendeleteSipAccountEditionUid_"
                            x:Name="_whatWillHappendeleteSipAccountEdition_"
                            Margin="0,10,0,0"
                            Padding="10,0"
                            Style="{StaticResource BodyTextBlockStyle}"
                            Foreground="Red"
                            Visibility="Collapsed"/>
                        <HyperlinkButton
                            x:Uid="_learnMoreDeleteAccountEditionUid_"
                            x:Name="_learnMoreDeleteAccountEdition_"
                            Visibility="Collapsed"
                            Margin="0,0,0,10"
                            Padding="10,0"
                            NavigateUri="http://ring.cx"/>
                        <!--banned list-->
                        <StackPanel>
                            <StackPanel Orientation="Horizontal"
                                        Margin="10"
                                        Padding="10,0">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                   Text="&#xE8F8;"/>
                                <HyperlinkButton x:Name="_accountsShowBannedList_"
                                             Content="Show banned contact list"
                                             Margin="10,0,0,10"
                                             Click="_showBannedList__PointerPressed"/>
                            </StackPanel>
                            <Grid x:Name="_bannedContactListGrid_"
                                  Visibility="Collapsed">
                                <StackPanel>
                                    <ListBox    x:Name="_bannedContactList_"
                                                Margin="0"
                                                Padding="0"
                                                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                                ScrollViewer.HorizontalScrollMode="Disabled"
                                                MaxWidth="260"
                                                ItemContainerStyle="{StaticResource bannedContactListBoxStyle}"
                                                ItemTemplate="{StaticResource BannedContactTemplate}"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                        <!--label/divider for other-->
                        <Grid Margin="0,20,0,0"
                              Padding="10,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Rectangle  Grid.Column="0"
                                            Fill="Gray"
                                            Height="2"
                                            Margin="16,4,4,4"/>
                            <TextBlock  Grid.Column="1"
                                            HorizontalAlignment="Center"
                                            Text="Other"
                                            Margin="4"/>
                            <Rectangle  Grid.Column="2"
                                            Fill="Gray"
                                            Height="2"
                                            Margin="4,4,16,4"/>
                        </Grid>
                        <!--other settings-->
                        <StackPanel Orientation="Horizontal"
                                    Margin="10"
                                    Padding="10,0">
                            <TextBlock  Style="{StaticResource TextSegoeStyle-20pt-black}"
                                        Text="&#xE8D0;"/>
                            <TextBlock
                                x:Uid="_accountsAutoAnswer_"
                                Margin="10,20,10,10"
                                TextWrapping="Wrap"/>
                        </StackPanel>
                        <ToggleSwitch   x:Name="_autoAnswerToggle_"
                                        Toggled="_autoAnswerToggle__Toggled"
                                        IsOn="False"
                                        Margin="20,10"
                                        Padding="10,0"/>
                        <StackPanel     Orientation="Horizontal"
                                        Margin="10"
                                        Padding="10,0">
                            <TextBlock  Style="{StaticResource TextSegoeStyle-20pt-black}"
                                        Text="&#xE8D7;"/>
                            <TextBlock
                                x:Uid="_accountsIncognitoContacts_"
                                Width="240"
                                Margin="10"
                                TextWrapping="Wrap"/>
                        </StackPanel>
                        <ToggleSwitch   x:Name="_dhtPublicInCallsToggle_"
                                        Toggled="_dhtPublicInCalls__Toggled"
                                        IsOn="True"
                                        Margin="20,10,20,20"
                                        Padding="10,0"/>
                    </StackPanel>
                </ScrollViewer>
                <!-- buttons yes/no to accept the modification. -->
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button x:Name="_acceptAccountModification_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE081;"
                                Click="_acceptAccountModification__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                        <Button x:Name="_cancelAccountModification_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE106;"
                                Click="_cancelAccountModification__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                    </StackPanel>
                </Grid>
            </Grid>
            <!-- account creation menu. -->
            <Grid x:Name="_accountCreationMenuGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#ffe4f1f9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Name="_accountsCreation_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text=""/>
                <ScrollViewer x:Name="_accountCreationMenuScrollViewer_"
                              Grid.Row="1">
                    <StackPanel Orientation="Vertical"
                                Padding="10,0"
                                Background="#FFE4F1F9">
                        <!-- alias sub menu. -->
                        <StackPanel Orientation="Horizontal"
                                    Margin="0,20">
                            <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Margin="0,0,10,0"
                                       Text="&#xE8EC;"/>
                            <TextBlock Text="Alias"/>
                        </StackPanel>
                        <Grid Margin="10,0,10,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="25"/>
                            </Grid.ColumnDefinitions>
                            <TextBox
                                x:Uid="_accountAliasTextBoxUid_"
                                x:Name="_accountAliasTextBox_"
                                Grid.Column="0"
                                TextChanged="_accountAliasTextBox__TextChanged"/>
                            <TextBlock
                                x:Name="_accountAliasValid_"
                                Grid.Column="1"
                                Padding="10,0"
                                Style="{StaticResource TextSegoeStyle-20pt-green}"
                                Visibility="Collapsed"
                                Text="&#xE10B;"/>
                            <TextBlock
                                x:Name="_accountAliasInvalid_"
                                Grid.Column="1"
                                Padding="10,0"
                                Style="{StaticResource TextSegoeStyle-20pt-red}"
                                Text="&#xE10A;"/>
                        </Grid>
                        <!-- account type chooser -->
                        <StackPanel
                            Orientation="Horizontal"
                            Margin="0,20">
                            <TextBlock
                                Style="{StaticResource TextSegoeStyle-20pt-black}"
                                Margin="0,0,10,0"
                                Text="&#xE168;"/>
                            <TextBlock x:Uid="_accountsType_"/>
                        </StackPanel>
                        <ComboBox
                            x:Name="_accountTypeComboBox_"
                            SelectedIndex="0"
                            Margin="10,10,0,0"
                            SelectionChanged="_accountTypeComboBox__SelectionChanged"
                            VerticalAlignment="Center"
                            Width="195">
                            <ComboBoxItem Content="Ring"/>
                            <ComboBoxItem Content="Sip"/>
                        </ComboBox>
                        <!-- RING account. -->
                        <StackPanel x:Name="_ringAccountCreationStack_"
                                    Margin="0,20"
                                    Visibility="Visible">
                            <!-- register account on blockachain -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,20">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Margin="0,0,10,0"
                                           Text="&#xE167;"/>
                                <TextBlock x:Uid="_accountsRegisterPublicName_"/>
                            </StackPanel>
                            <ToggleSwitch
                                x:Name="_RegisterState_"
                                IsOn="True"
                                Toggled="_RegisterState__Toggled"
                                Margin="0,10"/>
                            <TextBlock
                                x:Name="_whatWillHappen_"
                                Margin="0,10,0,0"
                                Style="{StaticResource BodyTextBlockStyle}"
                                Text="People can find you with your username"/>
                            <HyperlinkButton Content="Learn more"
                                             Margin="0,0,0,10"
                                             NavigateUri="http://ring.cx"/>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="25"/>
                                </Grid.ColumnDefinitions>
                                <TextBox
                                    x:Uid="_usernameTextBoxEditionUid_"
                                    x:Name="_usernameTextBox_"
                                    Grid.Column="0"
                                    KeyUp="_usernameTextBox__KeyUp"/>
                                <TextBlock
                                    x:Name="_usernameValid_"
                                    Grid.Column="1"
                                    Padding="10,0"
                                    Style="{StaticResource TextSegoeStyle-20pt-green}"
                                    Visibility="Collapsed"
                                    Text="&#xE10B;"/>
                                <TextBlock
                                    x:Name="_usernameInvalid_"
                                    Grid.Column="1"
                                    Padding="10,0"
                                    Style="{StaticResource TextSegoeStyle-20pt-red}"
                                    Text="&#xE10A;"/>
                            </Grid>
                            <!-- password sub menu. -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,20">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                        Margin="0,0,10,0"
                                        Text="&#xE8D7;"/>
                                <TextBlock Text="Password"/>
                            </StackPanel>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="25"/>
                                </Grid.ColumnDefinitions>
                                <PasswordBox
                                    x:Uid="_ringPasswordBoxAccountCreationUid_"
                                    x:Name="_ringPasswordBoxAccountCreation_"
                                    Grid.Column="0"
                                    PasswordChanged="_passwordBoxAccountCreationCheck__PasswordChanged"/>
                                <TextBlock x:Name="_passwordValid_"
                                           Grid.Column="1"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Visibility="Collapsed"
                                           Text="&#xE10B;"/>
                                <TextBlock x:Name="_passwordInvalid_"
                                           Grid.Column="1"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;"/>
                            </Grid>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="25"/>
                                </Grid.ColumnDefinitions>
                                <PasswordBox
                                    x:Uid="_ringPasswordBoxAccountCreationCheckUid_"
                                    x:Name="_ringPasswordBoxAccountCreationCheck_"
                                             Grid.Column="0"
                                             PasswordChanged="_passwordBoxAccountCreationCheck__PasswordChanged"/>
                                <TextBlock x:Name="_passwordCheckValid_"
                                           Grid.Column="1"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-green}"
                                           Visibility="Collapsed"
                                           Text="&#xE10B;"/>
                                <TextBlock x:Name="_passwordCheckInvalid_"
                                           Grid.Column="1"
                                           Padding="10,0"
                                           Style="{StaticResource TextSegoeStyle-20pt-red}"
                                           Text="&#xE10A;"/>
                            </Grid>
                            <!-- upnp sub menu. -->
                            <StackPanel Orientation="Horizontal"
                                        Margin="0,20">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                            Margin="0,0,10,0"
                                           Text="&#xE15E;"/>
                                <TextBlock x:Uid="_accountsUPnP_"/>
                            </StackPanel>
                            <ToggleSwitch x:Name="_upnpStateAccountCreation_"
                                          IsOn="True"
                                          Margin="0,10"/>
                        </StackPanel>
                        <!-- SIP account. -->
                        <StackPanel x:Name="_sipAccountCreationStack_"
                                    Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal"
                                        Margin="10">
                                <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                           Text="&#xE717;"/>
                                <TextBlock x:Uid="_accountsSIPParameters_"
                                           Margin="10"/>
                            </StackPanel>
                            <TextBox
                                x:Uid="_sipHostnameEditionUid_"
                                x:Name="_sipHostnameTextBox_"
                                Margin="10"/>
                            <TextBox
                                x:Uid="_sipUsernameEditionTextBoxUid_"
                                x:Name="_sipUsernameTextBox_"
                                Margin="10"/>
                            <PasswordBox
                                x:Uid="_sipPasswordEditionUid_"
                                x:Name="_sipPasswordBoxAccountCreation_"
                                Margin="10"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- buttons yes/no to create the new account. -->
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button x:Name="_createAccountYes_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE081;"
                                Click="_createAccountYes__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                        <Button x:Name="_createAccountNo_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE106;"
                                Click="_createAccountNo__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                    </StackPanel>
                </Grid>
            </Grid>

            <!-- add account menu. -->
            <Grid x:Name="_accountAddMenuGrid_"
                  Visibility="Collapsed"
                  Grid.Row="0"
                  Background="#ffe4f1f9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountsAddDevice_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal"
                            Background="#FFE4F1F9"
                            Padding="10"
                            Grid.Row="1">
                    <Button x:Name="_step1button_"
                            Click="_step1button__Click"
                            Content="Step 1"/>
                    <TextBlock Text=">"/>
                    <Button x:Name="_step2button_"
                            Click="_step2button__Click"
                            Content="Step 2"/>
                </StackPanel>
                <!-- step 1. -->
                <StackPanel x:Name="_step1Menu_"
                                    Background="#FFE4F1F9"
                                    Padding="10"
                                    Grid.Row="1">
                    <TextBlock
                        x:Uid="_accountsAddStep1_"
                        TextWrapping="Wrap"
                        TextAlignment="Justify"/>
                    <HyperlinkButton
                        x:Uid="_accountsEditionLearnMore_"
                        Margin="0,0,0,10"
                        NavigateUri="http://ring.cx"/>
                </StackPanel>
                <!-- step 2. -->
                <StackPanel x:Name="_step2Menu_"
                            Background="#FFE4F1F9"
                            Visibility="Collapsed"
                            Grid.Row="1">
                    <TextBox
                        x:Uid="_accountsAddEnterPIN_"
                        x:Name="_PINTextBox_"
                        Margin="10"
                        GotFocus="_PINTextBox__GotFocus"
                        KeyUp="_addAccountInputValidation__KeyUp"/>
                    <PasswordBox
                        x:Uid="_accountsEnterArchivePassword_"
                        x:Name="_ArchivePassword_"
                        Margin="10"
                        KeyUp="_addAccountInputValidation__KeyUp"/>
                    <TextBlock x:Name="_response_"
                               Foreground="Red"
                               HorizontalAlignment="Center"
                               Text=""/>
                </StackPanel>
                <!-- buttons next step and yes/no to add the account. -->
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <StackPanel Orientation="Horizontal"
                                        Padding="10,0"
                                        HorizontalAlignment="Center">
                        <Button x:Name="_nextstep_"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        Content="&#xE081;"
                                        Click="_step2button__Click"
                                        Style="{StaticResource ButtonStyle2}"/>
                        <Button x:Name="_addAccountYes_"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        Visibility="Collapsed"
                                        Content="&#xE081;"
                                        Click="_addAccountYes__Click"
                                        Style="{StaticResource ButtonStyle5}"/>
                        <Button x:Name="_addAccountNo_"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        Visibility="Collapsed"
                                        Content="&#xE106;"
                                        Click="_addAccountNo__Click"
                                        Style="{StaticResource ButtonStyle5}"/>
                    </StackPanel>
                </Grid>
            </Grid>
            <!-- share menu. -->
            <Grid x:Name="_shareMenuGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#ffe4f1f9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountsShare_"
                            x:Name="_shareTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <Grid Background="#FFE4F1F9"
                      Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid Background="white"
                          Margin="10"
                          MaxHeight="140"
                          Grid.Row="0"
                          MaxWidth="140"
                          Padding="5">
                        <Image x:Name="_selectedAccountQrCode_"
                           Width="200"
                           Margin="5"
                           Grid.Row="0"
                           Stretch="None"
                           Height="200"/>
                    </Grid>
                    <TextBlock x:Name="_ringId_"
                               Padding="1"
                               Style="{StaticResource TextStyle4}"
                               Text=""
                               Grid.Row="1"
                               IsTextSelectionEnabled="True"
                               HorizontalAlignment="Center"/>
                </Grid>
                <Grid Background="#3bc1d3"
                      Grid.Row="2">
                    <Button x:Name="_shareMenuDone_"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Content="&#xE081;"
                        Click="_shareMenuDone__Click"
                        Style="{StaticResource ButtonStyle6}"/>
                </Grid>
            </Grid>
            <!-- devices menu. -->
            <Grid x:Name="_devicesMenuGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#FFE4F1F9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountsDevices_"
                            x:Name="_devicesMenuTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <Grid   Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>
                    <!-- about this device -->
                    <StackPanel Orientation="Horizontal"
                                    Grid.Row="0"
                                    Margin="10,20">
                        <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Margin="0,0,10,0"
                                       Text="&#xE211;"/>
                        <TextBlock Text="Your device ID"/>
                    </StackPanel>
                    <TextBlock x:Name="_deviceId_"
                               Margin="10"
                               Text="[TEXT_MISSING]"
                               TextTrimming="CharacterEllipsis"
                               FontSize="12"
                               Grid.Row="1"
                               IsTextSelectionEnabled="True"
                               HorizontalAlignment="Center"/>
                    <!-- about linked devices -->
                    <StackPanel Orientation="Horizontal"
                                    Grid.Row="2"
                                    Margin="10,20">
                        <TextBlock Style="{StaticResource TextSegoeStyle-20pt-black}"
                                       Margin="0,0,10,0"
                                       Text="&#xEBD2;"/>
                        <TextBlock Text="other linked devices"/>
                    </StackPanel>
                    <TextBlock  x:Uid="_waitingDevicesListUid_"
                                x:Name="_waitingDevicesList_"
                                Grid.Row="3"
                                IsTextSelectionEnabled="True"
                                HorizontalAlignment="Center"/>
                    <ListBox x:Name="_devicesIdList_"
                             Visibility="Collapsed"
                             Padding="10,0"
                             Background="#FFE4F1F9"
                             Grid.Row="3"/>
                </Grid>
                <!-- button to add device. -->
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <Button x:Name="_addDevice_"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            Content="&#xE948;"
                            Click="_addDevice__Click"
                            Style="{StaticResource ButtonStyle6}"/>
                </Grid>
            </Grid>
            <!-- add device (pin generator) menu. -->
            <Grid x:Name="_addingDeviceGrid_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#FFE4F1F9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Name="_addDeviceMenuTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text="Add Device"/>
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock
                        x:Uid="_accountsPINGenerator_"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Grid.Row="0"
                        Margin="10,10,0,10"/>
                    <PasswordBox
                        x:Uid="_accountsEnterArchivePassword_"
                        x:Name="_passwordForPinGenerator_"
                        Margin="10"
                        Grid.Row="1"
                        KeyUp="_passwordForPinGenerator__KeyUp"
                        PlaceholderText="Enter your password"/>
                </Grid>
                <!-- buttons yes/no to generate a PIN. -->
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button x:Name="_pinGeneratorYes_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE081;"
                                Click="_pinGeneratorYes__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                        <Button x:Name="_pinGeneratorNo_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE106;"
                                Click="_pinGeneratorNo__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                    </StackPanel>
                </Grid>
            </Grid>
            <!-- waiting for a PIN. -->
            <Grid x:Name="_waitingForPin_"
                Grid.Row="0"
                Visibility="Collapsed"
                Background="#FFE4F1F9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="30"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_accountsAddDevice_"
                            x:Name="_waitingForPinTitle_"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock
                        x:Uid="_accountsWaitingAndResult_"
                        x:Name="_waitingAndResult_"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               Grid.Row="0"
                               Margin="10,10,0,10"/>
                </Grid>
                <Grid Grid.Row="2"
                      Background="#3bc1d3">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                        <Button x:Name="_closePin_"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Content="&#xE081;"
                                Click="_closePin__Click"
                                Style="{StaticResource ButtonStyle5}"/>
                    </StackPanel>
                </Grid>
            </Grid>
            <!-- contacts + calls => smartpanelitems. -->
            <Grid x:Name="_smartGrid_"
                  Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="_contactsTitleRow_"
                                   Height="30"/>
                    <RowDefinition x:Name="_rowRingTxtBx_"
                                   Height="40"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,0"/>
                <TextBlock  x:Uid="_contactsTitle_"
                            x:Name="_contactsTitle_"
                            Grid.Row="0"
                            FontSize="18"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Border     x:Name="BackgroundElement"
                                Grid.Column="0"
                                Background="White"
                                Margin="6"
                                Opacity="1"
                                Grid.ColumnSpan="2">
                    </Border>
                    <TextBox    x:Name="_ringTxtBx_"
                                Grid.Column="0"
                                VerticalAlignment="Center"
                                BorderThickness="0"
                                HorizontalAlignment="Stretch"
                                Padding="4"
                                Margin="6"
                                Foreground="Black"
                                Background="White"
                                TextWrapping="Wrap"
                                KeyUp="_ringTxtBx__KeyUp"
                                Text="">
                    </TextBox>
                    <Button     x:Name="_addButton_"
                                Background="Transparent"
                                Grid.Column="1"
                                FontFamily="Segoe MDL2 Assets"
                                Foreground="#3bc1d3"
                                Content=" &#xE1E2;"
                                Click="_ringTxtBx__Click"
                                BorderThickness="0"
                                Visibility="Visible"
                                IsTabStop="False"
                                FontSize="20"
                                Width="38"
                                Margin="6"
                                Padding="4,4,8,4"
                                VerticalAlignment="Stretch">
                        <Button.RenderTransform>
                            <TranslateTransform X="0"/>
                        </Button.RenderTransform>
                    </Button>
                </Grid>
                <ListBox    x:Name="_smartList_"
                            GotFocus="_smartList__GotFocus"
                            Grid.Row="3"
                            Background="Transparent"
                            Margin="0"
                            SelectionChanged="_smartList__SelectionChanged"
                            Padding="0"
                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                            ScrollViewer.HorizontalScrollMode="Disabled"
                            MaxWidth="320"
                            ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                            ItemTemplate="{StaticResource SmartPanelItemsTemplate}"/>
            </Grid>
            <!-- trust requests -->
            <Grid x:Name="_incomingContactRequestGrid_"
                  Grid.Row="0">
                <Grid.RowDefinitions>
                        <RowDefinition Height="36"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>
                    <Rectangle  Grid.Row="0"
                                Fill="LightBlue"
                                Margin="6,6,6,6"/>
                    <TextBlock
                        x:Uid="_contactRequestsTitle_"
                        x:Name="_contactRequestsTitle_"
                                FontSize="18"
                                Padding="0,0,0,4"
                                Foreground="#FF404040"
                                FontWeight="SemiBold"
                                Grid.Row="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
                    <ListBox    x:Name="_incomingContactRequestList_"
                                Grid.Row="1"
                                Background="Transparent"
                                Margin="0"
                                Padding="0"
                                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                ScrollViewer.HorizontalScrollMode="Disabled"
                                MaxWidth="320"
                                ItemContainerStyle="{StaticResource contactsListBoxStyle}"
                                ItemTemplate="{StaticResource ContactRequestItemsTemplate}"/>
            </Grid>
            <!-- settings. -->
            <Grid x:Name="_settingsMenu_"
                  Grid.Row="0"
                  Visibility="Collapsed"
                  Background="#FFE4F1F9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="36"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Rectangle  Grid.Row="0"
                            Fill="LightBlue"
                            Margin="6,6,6,6"/>
                <TextBlock  x:Uid="_settingsTitle_"
                            x:Name="_settingsTitle_"
                            Grid.Row="0"
                            FontSize="18"
                            Padding="0,0,0,4"
                            Foreground="#FF404040"
                            FontWeight="SemiBold"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text=""/>
                <ScrollViewer x:Name="_settingsScrollView_"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              ScrollViewer.VerticalScrollMode="Enabled"
                              Grid.Row="1">
                    <!--video settings-->
                    <StackPanel Margin="4">
                        <!--label/divider for video-->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Rectangle  Grid.Column="0"
                                            Fill="Gray"
                                            Height="2"
                                            Margin="16,4,4,4"/>
                            <TextBlock  x:Uid="_settingsVideo_"
                                        Grid.Column="1"
                                            HorizontalAlignment="Center"
                                            Text=""
                                            Margin="4"/>
                            <Rectangle  Grid.Column="2"
                                            Fill="Gray"
                                            Height="2"
                                            Margin="4,4,16,4"/>
                        </Grid>
                        <TextBlock x:Uid="_settingsVideoDevice_"
                                   Margin="10"/>
                        <ComboBox x:Name="_videoDeviceComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoDeviceComboBox__SelectionChanged">
                        </ComboBox>
                        <TextBlock x:Uid="_settingsVideoResolution_"
                                   Margin="10"/>
                        <ComboBox x:Name="_videoResolutionComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoResolutionComboBox__SelectionChanged">
                        </ComboBox>
                        <TextBlock x:Uid="_settingsVideoRate_"
                                   Margin="10"/>
                        <ComboBox x:Name="_videoRateComboBox_"
                                  Margin="10"
                                  SelectionChanged="_videoRateComboBox__SelectionChanged">
                        </ComboBox>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</Page>
